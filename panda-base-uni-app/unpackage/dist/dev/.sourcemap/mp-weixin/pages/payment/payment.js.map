{"version":3,"file":"payment.js","sources":["pages/payment/payment.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGF5bWVudC9wYXltZW50LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"container\">\n\t\t\t<!-- ËÆ¢Âçï‰ø°ÊÅØ -->\n\t\t\t<view class=\"order-section\">\n\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t<text class=\"title-icon\">üìã</text>\n\t\t\t\t\t<text>ËÆ¢Âçï‰ø°ÊÅØ</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"order-info\">\n\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t<text class=\"label\">ËÆ¢ÂçïÁºñÂè∑</text>\n\t\t\t\t\t\t<text class=\"value\">{{ orderNo }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t<text class=\"label\">ÂïÜÂìÅÂêçÁß∞</text>\n\t\t\t\t\t\t<text class=\"value\">{{ productName }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t<text class=\"label\">Ë¥≠‰π∞Êï∞Èáè</text>\n\t\t\t\t\t\t<text class=\"value\">{{ quantity }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- ÊîØ‰ªòÈáëÈ¢ù -->\n\t\t\t<view class=\"amount-section\">\n\t\t\t\t<view class=\"amount-label\">ÊîØ‰ªòÈáëÈ¢ù</view>\n\t\t\t\t<view class=\"amount-value\">\n\t\t\t\t\t<text class=\"currency\">¬•</text>\n\t\t\t\t\t<text class=\"amount\">{{ payAmount }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- ÊîØ‰ªòÊñπÂºè -->\n\t\t\t<view class=\"payment-method-section\">\n\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t<text class=\"title-icon\">üí≥</text>\n\t\t\t\t\t<text>ÊîØ‰ªòÊñπÂºè</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"payment-list\">\n\t\t\t\t\t<view class=\"payment-item selected\">\n\t\t\t\t\t\t<view class=\"payment-left\">\n\t\t\t\t\t\t\t<view class=\"wechat-icon\">\n\t\t\t\t\t\t\t\t<text class=\"wechat-text\">ÂæÆ‰ø°</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"payment-name\">ÂæÆ‰ø°ÊîØ‰ªò</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"payment-check\">‚úì</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"payment-tip\">\n\t\t\t\t\t<text class=\"tip-text\">* ÂΩìÂâç‰ªÖÊîØÊåÅÂæÆ‰ø°ÊîØ‰ªò</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Â∫ïÈÉ®ÊîØ‰ªòÊåâÈíÆ -->\n\t\t<view class=\"bottom-bar\">\n\t\t\t<view class=\"total-info\">\n\t\t\t\t<text class=\"total-label\">ÂêàËÆ°Ôºö</text>\n\t\t\t\t<text class=\"total-amount\">¬•{{ payAmount }}</text>\n\t\t\t</view>\n\t\t\t<button class=\"pay-button\" @click=\"handlePay\" :loading=\"paying\" hover-class=\"button-hover\">Á°ÆËÆ§ÊîØ‰ªò</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { createWxPayOrder } from '../../api/order.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\torderId: null,\n\t\t\torderNo: '',\n\t\t\tproductName: '',\n\t\t\tquantity: 1,\n\t\t\tpayAmount: 0,\n\t\t\taddressId: null,\n\t\t\tpaying: false\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tif (options.orderId) {\n\t\t\tthis.orderId = options.orderId;\n\t\t}\n\t\tif (options.orderNo) {\n\t\t\tthis.orderNo = decodeURIComponent(options.orderNo);\n\t\t}\n\t\tif (options.productName) {\n\t\t\tthis.productName = decodeURIComponent(options.productName);\n\t\t}\n\t\tif (options.quantity) {\n\t\t\tthis.quantity = parseInt(options.quantity);\n\t\t}\n\t\tif (options.payAmount) {\n\t\t\tthis.payAmount = parseFloat(options.payAmount);\n\t\t}\n\t\tif (options.addressId) {\n\t\t\tthis.addressId = options.addressId;\n\t\t}\n\t},\n\tmethods: {\n\t\t// Â§ÑÁêÜÊîØ‰ªò\n\t\tasync handlePay() {\n\t\t\tif (!this.orderId) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËÆ¢Âçï‰ø°ÊÅØÈîôËØØ',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.paying) return; // Èò≤Ê≠¢ÈáçÂ§çÊèê‰∫§\n\t\t\t\n\t\t\tthis.paying = true;\n\t\t\t\n\t\t\ttry {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: 'ÊãâËµ∑ÊîØ‰ªò...',\n\t\t\t\t\tmask: true\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// ÂêëÂêéÁ´ØËØ∑Ê±ÇÂæÆ‰ø°È¢ÑÊîØ‰ªòÂèÇÊï∞\n\t\t\t\tconst payParams = {\n\t\t\t\t\torderId: this.orderId\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif (this.addressId) {\n\t\t\t\t\tpayParams.addressId = this.addressId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst wxPayData = await createWxPayOrder(payParams);\n\t\t\t\t\n\t\t\t\t// Ë∞ÉËµ∑ÂæÆ‰ø°ÊîØ‰ªò\n\t\t\t\tawait new Promise((resolve, reject) => {\n\t\t\t\t\tuni.requestPayment({\n\t\t\t\t\t\ttimeStamp: wxPayData.timeStamp,\n\t\t\t\t\t\tnonceStr: wxPayData.nonceStr,\n\t\t\t\t\t\tpackage: wxPayData.packageVal,\n\t\t\t\t\t\tsignType: wxPayData.signType || 'RSA',\n\t\t\t\t\t\tpaySign: wxPayData.paySign,\n\t\t\t\t\t\tsuccess: () => resolve(),\n\t\t\t\t\t\tfail: (err) => reject(err)\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tuni.hideLoading();\n\t\t\t\t\n\t\t\t\t// ÊîØ‰ªòÊàêÂäüÊèêÁ§∫\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'ÊîØ‰ªòÊàêÂäü',\n\t\t\t\t\tcontent: 'ÊîØ‰ªòÊàêÂäüÔºåÂÖëÊç¢Á†ÅÁîüÊàêÂèØËÉΩÊúâÂá†ÁßíÂª∂ËøüÔºåÂèØÂú®ËÆ¢ÂçïËØ¶ÊÉÖÊü•Áúã',\n\t\t\t\t\tconfirmText: 'Êü•ÁúãËØ¶ÊÉÖ',\n\t\t\t\t\tcancelText: 'Á®çÂêéÊü•Áúã',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\turl: `/pages/order-detail/order-detail?id=${this.orderId}`\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\turl: '/pages/my-orders/my-orders'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tuni.hideLoading();\n\t\t\t\tconsole.error('ÊîØ‰ªòÂ§±Ë¥•:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: (error && error.errMsg) || error.message || 'ÊîØ‰ªòÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tthis.paying = false;\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n\tpadding-bottom: 140rpx;\n}\n\n.container {\n\tpadding: 20rpx 0;\n}\n\n.section-title {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tpadding: 20rpx 30rpx;\n\tbackground-color: #ffffff;\n\tborder-bottom: 1rpx solid #f0f0f0;\n}\n\n.title-icon {\n\tfont-size: 28rpx;\n\tmargin-right: 8rpx;\n}\n\n/* ËÆ¢Âçï‰ø°ÊÅØ */\n.order-section {\n\tbackground-color: #ffffff;\n\tmargin-bottom: 20rpx;\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n\n.order-info {\n\tpadding: 20rpx 30rpx;\n}\n\n.info-row {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 20rpx;\n\tpadding: 12rpx 0;\n}\n\n.info-row:last-child {\n\tmargin-bottom: 0;\n}\n\n.label {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n}\n\n.value {\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tfont-weight: 500;\n}\n\n/* ÊîØ‰ªòÈáëÈ¢ù */\n.amount-section {\n\tbackground-color: #ffffff;\n\tpadding: 50rpx 30rpx;\n\tmargin-bottom: 20rpx;\n\ttext-align: center;\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n\n.amount-label {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tmargin-bottom: 20rpx;\n}\n\n.amount-value {\n\tdisplay: flex;\n\talign-items: baseline;\n\tjustify-content: center;\n}\n\n.currency {\n\tfont-size: 40rpx;\n\tfont-weight: bold;\n\tcolor: #90d26c;\n\tmargin-right: 4rpx;\n}\n\n.amount {\n\tfont-size: 80rpx;\n\tfont-weight: bold;\n\tcolor: #90d26c;\n\tline-height: 1;\n}\n\n/* ÊîØ‰ªòÊñπÂºè */\n.payment-method-section {\n\tbackground-color: #ffffff;\n\tmargin-bottom: 20rpx;\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n\n.payment-list {\n\tpadding: 20rpx 30rpx;\n}\n\n.payment-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 24rpx 20rpx;\n\tbackground-color: #f5f5f5;\n\tborder-radius: 12rpx;\n\tborder: 2rpx solid #e0e0e0;\n}\n\n.payment-item.selected {\n\tbackground: linear-gradient(135deg, #f0f9f0 0%, #ffffff 100%);\n\tborder-color: #90d26c;\n}\n\n.payment-left {\n\tdisplay: flex;\n\talign-items: center;\n\tflex: 1;\n}\n\n.wechat-icon {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tbackground: linear-gradient(135deg, #09bb07 0%, #07c160 100%);\n\tborder-radius: 12rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 16rpx;\n}\n\n.wechat-text {\n\tfont-size: 22rpx;\n\tcolor: #ffffff;\n\tfont-weight: bold;\n}\n\n.payment-name {\n\tfont-size: 30rpx;\n\tcolor: #333333;\n\tfont-weight: 500;\n}\n\n.payment-check {\n\twidth: 40rpx;\n\theight: 40rpx;\n\tborder-radius: 20rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tcolor: #ffffff;\n\tfont-size: 24rpx;\n\tfont-weight: bold;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.payment-tip {\n\tpadding: 10rpx 30rpx 20rpx;\n}\n\n.tip-text {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n}\n\n/* Â∫ïÈÉ®ÊîØ‰ªòÊåâÈíÆ */\n.bottom-bar {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground-color: #ffffff;\n\tpadding: 20rpx 30rpx;\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tz-index: 100;\n}\n\n.total-info {\n\tflex: 1;\n}\n\n.total-label {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tmargin-right: 10rpx;\n}\n\n.total-amount {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: #90d26c;\n}\n\n.pay-button {\n\twidth: 280rpx;\n\theight: 80rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tborder-radius: 40rpx;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\tborder: none;\n\tline-height: 80rpx;\n\tpadding: 0;\n}\n\n.pay-button::after {\n\tborder: none;\n}\n\n.button-hover {\n\topacity: 0.85;\n}\n</style>\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/payment/payment.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","createWxPayOrder"],"mappings":";;;AAuEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,SAAS;AAAA,MACT,aAAa;AAAA,MACb,UAAU;AAAA,MACV,WAAW;AAAA,MACX,WAAW;AAAA,MACX,QAAQ;AAAA,IACT;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,SAAS;AACpB,WAAK,UAAU,QAAQ;AAAA,IACxB;AACA,QAAI,QAAQ,SAAS;AACpB,WAAK,UAAU,mBAAmB,QAAQ,OAAO;AAAA,IAClD;AACA,QAAI,QAAQ,aAAa;AACxB,WAAK,cAAc,mBAAmB,QAAQ,WAAW;AAAA,IAC1D;AACA,QAAI,QAAQ,UAAU;AACrB,WAAK,WAAW,SAAS,QAAQ,QAAQ;AAAA,IAC1C;AACA,QAAI,QAAQ,WAAW;AACtB,WAAK,YAAY,WAAW,QAAQ,SAAS;AAAA,IAC9C;AACA,QAAI,QAAQ,WAAW;AACtB,WAAK,YAAY,QAAQ;AAAA,IAC1B;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,YAAY;AACjB,UAAI,CAAC,KAAK,SAAS;AAClBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEA,UAAI,KAAK;AAAQ;AAEjB,WAAK,SAAS;AAEd,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAGD,cAAM,YAAY;AAAA,UACjB,SAAS,KAAK;AAAA;AAGf,YAAI,KAAK,WAAW;AACnB,oBAAU,YAAY,KAAK;AAAA,QAC5B;AAEA,cAAM,YAAY,MAAMC,2BAAiB,SAAS;AAGlD,cAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCD,wBAAAA,MAAI,eAAe;AAAA,YAClB,WAAW,UAAU;AAAA,YACrB,UAAU,UAAU;AAAA,YACpB,SAAS,UAAU;AAAA,YACnB,UAAU,UAAU,YAAY;AAAA,YAChC,SAAS,UAAU;AAAA,YACnB,SAAS,MAAM,QAAS;AAAA,YACxB,MAAM,CAAC,QAAQ,OAAO,GAAG;AAAA,UAC1B,CAAC;AAAA,QACF,CAAC;AAEDA,sBAAG,MAAC,YAAW;AAGfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,aAAa;AAAA,UACb,YAAY;AAAA,UACZ,SAAS,CAAC,QAAQ;AACjB,gBAAI,IAAI,SAAS;AAChBA,4BAAAA,MAAI,WAAW;AAAA,gBACd,KAAK,uCAAuC,KAAK,OAAO;AAAA,cACzD,CAAC;AAAA,mBACK;AACNA,4BAAAA,MAAI,WAAW;AAAA,gBACd,KAAK;AAAA,cACN,CAAC;AAAA,YACF;AAAA,UACD;AAAA,QACD,CAAC;AAAA,MAEA,SAAO,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,+EAAc,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAQ,SAAS,MAAM,UAAW,MAAM,WAAW;AAAA,UACnD,MAAM;AAAA,UACN,UAAU;AAAA,QACX,CAAC;AAAA,MACF,UAAU;AACT,aAAK,SAAS;AAAA,MACf;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;ACrLA,GAAG,WAAW,eAAe;"}