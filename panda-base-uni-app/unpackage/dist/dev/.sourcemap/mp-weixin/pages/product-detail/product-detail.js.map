{"version":3,"file":"product-detail.js","sources":["pages/product-detail/product-detail.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdC1kZXRhaWwvcHJvZHVjdC1kZXRhaWwudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"page\">\r\n\t\t<view class=\"container\">\r\n\t\t\t<!-- 商品图片 -->\r\n\t\t\t<view class=\"product-image-section\">\r\n\t\t\t\t<image class=\"product-image\" :src=\"product.imageUrl || '/static/images/logo.png'\" mode=\"widthFix\"></image>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 商品信息 -->\r\n\t\t\t<view class=\"product-info\">\r\n\t\t\t\t<view class=\"product-name\">{{ product.name }}</view>\r\n\t\t\t\t<view class=\"product-desc\">{{ product.description }}</view>\r\n\t\t\t\t<view class=\"price-info\">\r\n\t\t\t\t\t<text class=\"current-price\">¥{{ product.price }}</text>\r\n\t\t\t\t\t<text class=\"original-price\" v-if=\"product.originalPrice\">¥{{ product.originalPrice }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 详细信息 -->\r\n\t\t\t<view class=\"detail-section\">\r\n\t\t\t\t<!-- 规格参数 -->\r\n\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t<view class=\"detail-title\">规格参数</view>\r\n\t\t\t\t\t<view class=\"detail-content\">\r\n\t\t\t\t\t\t<view class=\"param-row\">\r\n\t\t\t\t\t\t\t<text class=\"param-label\">商品类型：</text>\r\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ getProductType(product.type) }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"param-row\" v-if=\"product.validityDays\">\r\n\t\t\t\t\t\t\t<text class=\"param-label\">有效期：</text>\r\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ product.validityDays }}天</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"param-row\">\r\n\t\t\t\t\t\t\t<text class=\"param-label\">库存：</text>\r\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ product.stock || 0 }}件</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 运输说明 -->\r\n\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t<view class=\"detail-title\">运输说明</view>\r\n\t\t\t\t\t<view class=\"detail-content\">\r\n\t\t\t\t\t\t<text class=\"detail-text\">虚拟票证无需物流配送，购买成功后可在个人中心查看。如有实物商品，我们将在3个工作日内发货，请耐心等待。</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 退换货说明 -->\r\n\t\t\t\t<view class=\"detail-item\">\r\n\t\t\t\t\t<view class=\"detail-title\">退换货说明</view>\r\n\t\t\t\t\t<view class=\"detail-content\">\r\n\t\t\t\t\t\t<text class=\"detail-text\">1. 虚拟票证购买后不支持退换，请谨慎购买。</text>\r\n\t\t\t\t\t\t<text class=\"detail-text\">2. 如有质量问题，请联系客服处理。</text>\r\n\t\t\t\t\t\t<text class=\"detail-text\">3. 退款前提：卡片未使用且未过期。</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部购买按钮 -->\r\n\t\t<view class=\"bottom-bar\">\r\n\t\t\t<button class=\"buy-button\" @click=\"handleBuy\" hover-class=\"button-hover\">立即购买</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { getProductDetail } from '../../api/product.js';\r\nimport { checkPurchased } from '../../api/membershipCard.js';\r\nimport { isLoggedIn } from '../../utils/auth.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tproductId: null,\r\n\t\t\tproduct: {}\r\n\t\t}\r\n\t},\r\n\tonLoad(options) {\r\n\t\tif (options.id) {\r\n\t\t\tthis.productId = options.id;\r\n\t\t\tthis.loadProductDetail();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 加载商品详情\r\n\t\tasync loadProductDetail() {\r\n\t\t\ttry {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中...'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconst result = await getProductDetail(this.productId);\r\n\t\t\t\tthis.product = result || {};\r\n\t\t\t\t\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tconsole.error('加载商品详情失败:', error);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t// 获取商品类型名称\r\n\t\tgetProductType(type) {\r\n\t\t\tconst types = {\r\n\t\t\t\t1: '年卡',\r\n\t\t\t\t2: '月卡',\r\n\t\t\t\t3: '次票',\r\n\t\t\t\t4: '实物商品',\r\n\t\t\t\t5: '组合商品'\r\n\t\t\t};\r\n\t\t\treturn types[type] || '未知';\r\n\t\t},\r\n\t\t\r\n\t\t// 处理购买\r\n\t\thandleBuy() {\r\n\t\t\tif (!isLoggedIn()) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/login?redirect=/pages/product-detail/product-detail&productId=' + this.productId\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 2000);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 跳转到确认订单页\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/confirm-order/confirm-order?productId=${this.productId}`\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f8f8f8;\r\n\tpadding-bottom: 120rpx;\r\n}\r\n\r\n.container {\r\n\tbackground-color: #ffffff;\r\n}\r\n\r\n.product-image-section {\r\n\twidth: 100%;\r\n\tbackground-color: #f5f5f5;\r\n}\r\n\r\n.product-image {\r\n\twidth: 100%;\r\n\theight: auto;\r\n\tdisplay: block;\r\n}\r\n\r\n.product-info {\r\n\tpadding: 30rpx;\r\n\tbackground-color: #ffffff;\r\n\tborder-bottom: 1rpx solid #f0f0f0;\r\n}\r\n\r\n.product-name {\r\n\tfont-size: 38rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333333;\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.product-desc {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666666;\r\n\tline-height: 1.6;\r\n\tmargin-bottom: 24rpx;\r\n}\r\n\r\n.price-info {\r\n\tdisplay: flex;\r\n\talign-items: baseline;\r\n}\r\n\r\n.current-price {\r\n\tfont-size: 48rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ff4444;\r\n\tmargin-right: 20rpx;\r\n}\r\n\r\n.original-price {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999999;\r\n\ttext-decoration: line-through;\r\n}\r\n\r\n.detail-section {\r\n\tmargin-top: 20rpx;\r\n}\r\n\r\n.detail-item {\r\n\tbackground-color: #ffffff;\r\n\tpadding: 30rpx;\r\n\tmargin-bottom: 20rpx;\r\n}\r\n\r\n.detail-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #333333;\r\n\tmargin-bottom: 24rpx;\r\n\tpadding-bottom: 16rpx;\r\n\tborder-bottom: 2rpx solid #90d26c;\r\n}\r\n\r\n.detail-content {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666666;\r\n\tline-height: 1.8;\r\n}\r\n\r\n.param-row {\r\n\tdisplay: flex;\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.param-label {\r\n\tcolor: #999999;\r\n\tmargin-right: 16rpx;\r\n}\r\n\r\n.param-value {\r\n\tcolor: #333333;\r\n\tflex: 1;\r\n}\r\n\r\n.detail-text {\r\n\tdisplay: block;\r\n\tmargin-bottom: 12rpx;\r\n}\r\n\r\n.bottom-bar {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbackground-color: #ffffff;\r\n\tpadding: 20rpx 30rpx;\r\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\tz-index: 100;\r\n}\r\n\r\n.buy-button {\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\r\n\tborder-radius: 44rpx;\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tbox-shadow: 0 4rpx 12rpx rgba(144, 210, 108, 0.4);\r\n}\r\n\r\n.buy-button::after {\r\n\tborder: none;\r\n}\r\n\r\n.button-hover {\r\n\topacity: 0.85;\r\n}\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/product-detail/product-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getProductDetail","isLoggedIn"],"mappings":";;;;AAuEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,WAAW;AAAA,MACX,SAAS,CAAC;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,IAAI;AACf,WAAK,YAAY,QAAQ;AACzB,WAAK,kBAAiB;AAAA,IACvB;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,oBAAoB;AACzB,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,QACR,CAAC;AAED,cAAM,SAAS,MAAMC,YAAAA,iBAAiB,KAAK,SAAS;AACpD,aAAK,UAAU,UAAU;AAEzBD,sBAAG,MAAC,YAAW;AAAA,MACd,SAAO,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,sBAAc,MAAA,MAAA,SAAA,iDAAA,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAID,eAAe,MAAM;AACpB,YAAM,QAAQ;AAAA,QACb,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA;AAEJ,aAAO,MAAM,IAAI,KAAK;AAAA,IACtB;AAAA;AAAA,IAGD,YAAY;AACX,UAAI,CAACE,WAAU,WAAA,GAAI;AAClBF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK,gFAAgF,KAAK;AAAA,UAC3F,CAAC;AAAA,QACD,GAAE,GAAI;AACP;AAAA,MACD;AAGAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,gDAAgD,KAAK,SAAS;AAAA,MACpE,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;AC3IA,GAAG,WAAW,eAAe;"}