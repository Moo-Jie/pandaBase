{"version":3,"file":"product-detail.js","sources":["pages/product-detail/product-detail.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdC1kZXRhaWwvcHJvZHVjdC1kZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"container\">\n\t\t\t<!-- 商品图片 -->\n\t\t\t<view class=\"product-image-section\">\n\t\t\t\t<image class=\"product-image\" :src=\"product.imageUrl || '/static/images/logo.png'\" mode=\"widthFix\"></image>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 商品信息 -->\n\t\t\t<view class=\"product-info\">\n\t\t\t\t<view class=\"product-name\">{{ product.name }}</view>\n\t\t\t\t<view class=\"product-desc\">{{ product.description }}</view>\n\t\t\t\t<view class=\"price-info\">\n\t\t\t\t\t<text class=\"current-price\">¥{{ product.price }}</text>\n\t\t\t\t\t<text class=\"original-price\" v-if=\"product.originalPrice\">¥{{ product.originalPrice }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 详细信息 -->\n\t\t\t<view class=\"detail-section\">\n\t\t\t\t<!-- 规格参数 -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">规格参数</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<view class=\"param-row\">\n\t\t\t\t\t\t\t<text class=\"param-label\">商品类型：</text>\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ getProductType(product.type) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"param-row\" v-if=\"product.validityDays\">\n\t\t\t\t\t\t\t<text class=\"param-label\">有效期：</text>\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ product.validityDays }}天</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"param-row\">\n\t\t\t\t\t\t\t<text class=\"param-label\">库存：</text>\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ product.stock || 0 }}件</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 运输说明 -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">运输说明</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<text class=\"detail-text\">虚拟票证无需物流配送，购买成功后可在个人中心查看。如有实物商品，我们将在3个工作日内发货，请耐心等待。</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 退换货说明 -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">退换货说明</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<text class=\"detail-text\">1. 虚拟票证购买后不支持退换，请谨慎购买。</text>\n\t\t\t\t\t\t<text class=\"detail-text\">2. 如有质量问题，请联系客服处理。</text>\n\t\t\t\t\t\t<text class=\"detail-text\">3. 退款前提：卡片未使用且未过期。</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 底部购买按钮 -->\n\t\t<view class=\"bottom-bar\">\n\t\t\t<button class=\"buy-button\" @click=\"handleBuy\" hover-class=\"button-hover\">立即购买</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { getProductDetail } from '../../api/product.js';\nimport { checkPurchased } from '../../api/membershipCard.js';\nimport { isLoggedIn } from '../../utils/auth.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tproductId: null,\n\t\t\tproduct: {}\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.productId = options.id;\n\t\t\tthis.loadProductDetail();\n\t\t}\n\t},\n\tmethods: {\n\t\t// 加载商品详情\n\t\tasync loadProductDetail() {\n\t\t\ttry {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '加载中...'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconst result = await getProductDetail(this.productId);\n\t\t\t\tthis.product = result || {};\n\t\t\t\t\n\t\t\t\tuni.hideLoading();\n\t\t\t} catch (error) {\n\t\t\t\tuni.hideLoading();\n\t\t\t\tconsole.error('加载商品详情失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '加载失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t\n\t\t// 获取商品类型名称\n\t\tgetProductType(type) {\n\t\t\tconst types = {\n\t\t\t\t1: '年卡',\n\t\t\t\t2: '月卡',\n\t\t\t\t3: '次票',\n\t\t\t\t4: '实物商品',\n\t\t\t\t5: '组合商品'\n\t\t\t};\n\t\t\treturn types[type] || '未知';\n\t\t},\n\t\t\n\t\t// 处理购买\n\t\thandleBuy() {\n\t\t\tif (!isLoggedIn()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请先登录',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/pages/login/login?redirect=/pages/product-detail/product-detail&productId=' + this.productId\n\t\t\t\t\t});\n\t\t\t\t}, 2000);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 跳转到确认订单页\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/confirm-order/confirm-order?productId=${this.productId}`\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #f8f8f8;\n\tpadding-bottom: 120rpx;\n}\n\n.container {\n\tbackground-color: #ffffff;\n}\n\n.product-image-section {\n\twidth: 100%;\n\tbackground-color: #f5f5f5;\n}\n\n.product-image {\n\twidth: 100%;\n\theight: auto;\n\tdisplay: block;\n}\n\n.product-info {\n\tpadding: 30rpx;\n\tbackground-color: #ffffff;\n\tborder-bottom: 1rpx solid #f0f0f0;\n}\n\n.product-name {\n\tfont-size: 38rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tmargin-bottom: 16rpx;\n}\n\n.product-desc {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tline-height: 1.6;\n\tmargin-bottom: 24rpx;\n}\n\n.price-info {\n\tdisplay: flex;\n\talign-items: baseline;\n}\n\n.current-price {\n\tfont-size: 48rpx;\n\tfont-weight: bold;\n\tcolor: #ff4444;\n\tmargin-right: 20rpx;\n}\n\n.original-price {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n\ttext-decoration: line-through;\n}\n\n.detail-section {\n\tmargin-top: 20rpx;\n}\n\n.detail-item {\n\tbackground-color: #ffffff;\n\tpadding: 30rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.detail-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tmargin-bottom: 24rpx;\n\tpadding-bottom: 16rpx;\n\tborder-bottom: 2rpx solid #90d26c;\n}\n\n.detail-content {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tline-height: 1.8;\n}\n\n.param-row {\n\tdisplay: flex;\n\tmargin-bottom: 16rpx;\n}\n\n.param-label {\n\tcolor: #999999;\n\tmargin-right: 16rpx;\n}\n\n.param-value {\n\tcolor: #333333;\n\tflex: 1;\n}\n\n.detail-text {\n\tdisplay: block;\n\tmargin-bottom: 12rpx;\n}\n\n.bottom-bar {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground-color: #ffffff;\n\tpadding: 20rpx 30rpx;\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n\tz-index: 100;\n}\n\n.buy-button {\n\twidth: 100%;\n\theight: 88rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tborder-radius: 44rpx;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\tborder: none;\n\tbox-shadow: 0 4rpx 12rpx rgba(144, 210, 108, 0.4);\n}\n\n.buy-button::after {\n\tborder: none;\n}\n\n.button-hover {\n\topacity: 0.85;\n}\n</style>\n\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/product-detail/product-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getProductDetail","isLoggedIn"],"mappings":";;;;AAuEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,WAAW;AAAA,MACX,SAAS,CAAC;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,IAAI;AACf,WAAK,YAAY,QAAQ;AACzB,WAAK,kBAAiB;AAAA,IACvB;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,oBAAoB;AACzB,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,QACR,CAAC;AAED,cAAM,SAAS,MAAMC,YAAAA,iBAAiB,KAAK,SAAS;AACpD,aAAK,UAAU,UAAU;AAEzBD,sBAAG,MAAC,YAAW;AAAA,MACd,SAAO,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,sBAAA,MAAA,MAAA,SAAA,iDAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAID,eAAe,MAAM;AACpB,YAAM,QAAQ;AAAA,QACb,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA;AAEJ,aAAO,MAAM,IAAI,KAAK;AAAA,IACtB;AAAA;AAAA,IAGD,YAAY;AACX,UAAI,CAACE,WAAU,WAAA,GAAI;AAClBF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK,gFAAgF,KAAK;AAAA,UAC3F,CAAC;AAAA,QACD,GAAE,GAAI;AACP;AAAA,MACD;AAGAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,gDAAgD,KAAK,SAAS;AAAA,MACpE,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;AC3IA,GAAG,WAAW,eAAe;"}