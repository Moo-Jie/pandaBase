{"version":3,"file":"product-detail.js","sources":["pages/product-detail/product-detail.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdC1kZXRhaWwvcHJvZHVjdC1kZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"container\">\n\t\t\t<!-- å•†å“å›¾ç‰‡ -->\n\t\t\t<view class=\"product-image-section\">\n\t\t\t\t<image class=\"product-image\" :src=\"product.imageUrl || '/static/images/logo.png'\" mode=\"widthFix\"></image>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- å•†å“ä¿¡æ¯ -->\n\t\t\t<view class=\"product-info\">\n\t\t\t\t<view class=\"product-name\">{{ product.name }}</view>\n\t\t\t\t<view class=\"product-desc\">{{ product.description }}</view>\n\t\t\t\t<view class=\"price-info\">\n\t\t\t\t\t<text class=\"current-price\">Â¥{{ product.price }}</text>\n\t\t\t\t\t<text class=\"original-price\" v-if=\"product.originalPrice\">Â¥{{ product.originalPrice }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- è¯¦ç»†ä¿¡æ¯ -->\n\t\t\t<view class=\"detail-section\">\n\t\t\t\t<!-- è§„æ ¼å‚æ•° -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">è§„æ ¼å‚æ•°</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<view class=\"param-row\">\n\t\t\t\t\t\t\t<text class=\"param-label\">å•†å“ç±»å‹ï¼š</text>\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ getProductType(product.type) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"param-row\" v-if=\"product.validityDays\">\n\t\t\t\t\t\t\t<text class=\"param-label\">æœ‰æ•ˆæœŸï¼š</text>\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ product.validityDays }}å¤©</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"param-row\">\n\t\t\t\t\t\t\t<text class=\"param-label\">åº“å­˜ï¼š</text>\n\t\t\t\t\t\t\t<text class=\"param-value\">{{ product.stock || 0 }}ä»¶</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- è¿è¾“è¯´æ˜ -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">è¿è¾“è¯´æ˜</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<text class=\"detail-text\">è™šæ‹Ÿç¥¨è¯æ— éœ€ç‰©æµé…é€ï¼Œè´­ä¹°æˆåŠŸåå¯åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹ã€‚å¦‚æœ‰å®ç‰©å•†å“ï¼Œæˆ‘ä»¬å°†åœ¨3ä¸ªå·¥ä½œæ—¥å†…å‘è´§ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- é€€æ¢è´§è¯´æ˜ -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">é€€æ¢è´§è¯´æ˜</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<text class=\"detail-text\">1. è™šæ‹Ÿç¥¨è¯è´­ä¹°åï¼Œæœªå…‘æ¢å¯ç”³è¯·é€€æ¬¾ã€‚</text>\n\t\t\t\t\t\t<text class=\"detail-text\">2. å·²å…‘æ¢çš„è®¢å•ä¸æ”¯æŒé€€æ¬¾ã€‚</text>\n\t\t\t\t\t\t<text class=\"detail-text\">3. å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»å®¢æœå’¨è¯¢ã€‚</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- å®¢æœå’¨è¯¢ -->\n\t\t\t\t<view class=\"detail-item\">\n\t\t\t\t\t<view class=\"detail-title\">éœ€è¦å¸®åŠ©ï¼Ÿ</view>\n\t\t\t\t\t<view class=\"detail-content\">\n\t\t\t\t\t\t<view class=\"contact-service-btn\" @click=\"handleContactService\" hover-class=\"button-hover\">\n\t\t\t\t\t\t\t<text class=\"service-emoji\">ğŸ’¬</text>\n\t\t\t\t\t\t\t<text>è”ç³»å®¢æœå’¨è¯¢</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- åº•éƒ¨è´­ä¹°æŒ‰é’® -->\n\t\t<view class=\"bottom-bar\">\n\t\t\t<button class=\"buy-button\" @click=\"handleBuy\" hover-class=\"button-hover\">ç«‹å³è´­ä¹°</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { getProductDetail } from '../../api/product.js';\nimport { checkPurchased } from '../../api/membershipCard.js';\nimport { isLoggedIn } from '../../utils/auth.js';\nimport { openCustomerServiceForProduct } from '../../utils/customer-service.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tproductId: null,\n\t\t\tproduct: {}\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.productId = options.id;\n\t\t\tthis.loadProductDetail();\n\t\t}\n\t},\n\tmethods: {\n\t\t// åŠ è½½å•†å“è¯¦æƒ…\n\t\tasync loadProductDetail() {\n\t\t\ttry {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: 'åŠ è½½ä¸­...'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconst result = await getProductDetail(this.productId);\n\t\t\t\tthis.product = result || {};\n\t\t\t\t\n\t\t\t\tuni.hideLoading();\n\t\t\t} catch (error) {\n\t\t\t\tuni.hideLoading();\n\t\t\t\tconsole.error('åŠ è½½å•†å“è¯¦æƒ…å¤±è´¥:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'åŠ è½½å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t\n\t\t// è·å–å•†å“ç±»å‹åç§°\n\t\tgetProductType(type) {\n\t\t\tconst types = {\n\t\t\t\t1: 'å¹´å¡',\n\t\t\t\t2: 'æœˆå¡',\n\t\t\t\t3: 'æ¬¡ç¥¨',\n\t\t\t\t4: 'å®ç‰©å•†å“',\n\t\t\t\t5: 'ç»„åˆå•†å“'\n\t\t\t};\n\t\t\treturn types[type] || 'æœªçŸ¥';\n\t\t},\n\t\t\n\t\t// å¤„ç†è´­ä¹°\n\t\thandleBuy() {\n\t\t\tif (!isLoggedIn()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·å…ˆç™»å½•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/pages/login/login?redirect=/pages/product-detail/product-detail&productId=' + this.productId\n\t\t\t\t\t});\n\t\t\t\t}, 2000);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// è·³è½¬åˆ°ç¡®è®¤è®¢å•é¡µ\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/confirm-order/confirm-order?productId=${this.productId}`\n\t\t\t});\n\t\t},\n\t\t\n\t\t// è”ç³»å®¢æœï¼ˆæ–°ç‰ˆAPIï¼‰\n\t\thandleContactService() {\n\t\t\topenCustomerServiceForProduct({\n\t\t\t\tid: this.product.id,\n\t\t\t\tname: this.product.name\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #f8f8f8;\n\tpadding-bottom: 120rpx;\n}\n\n.container {\n\tbackground-color: #ffffff;\n}\n\n.product-image-section {\n\twidth: 100%;\n\tbackground-color: #f5f5f5;\n}\n\n.product-image {\n\twidth: 100%;\n\theight: auto;\n\tdisplay: block;\n}\n\n.product-info {\n\tpadding: 30rpx;\n\tbackground-color: #ffffff;\n\tborder-bottom: 1rpx solid #f0f0f0;\n}\n\n.product-name {\n\tfont-size: 38rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tmargin-bottom: 16rpx;\n}\n\n.product-desc {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tline-height: 1.6;\n\tmargin-bottom: 24rpx;\n}\n\n.price-info {\n\tdisplay: flex;\n\talign-items: baseline;\n}\n\n.current-price {\n\tfont-size: 48rpx;\n\tfont-weight: bold;\n\tcolor: #ff4444;\n\tmargin-right: 20rpx;\n}\n\n.original-price {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n\ttext-decoration: line-through;\n}\n\n.detail-section {\n\tmargin-top: 20rpx;\n}\n\n.detail-item {\n\tbackground-color: #ffffff;\n\tpadding: 30rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.detail-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tmargin-bottom: 24rpx;\n\tpadding-bottom: 16rpx;\n\tborder-bottom: 2rpx solid #90d26c;\n}\n\n.detail-content {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\tline-height: 1.8;\n}\n\n.param-row {\n\tdisplay: flex;\n\tmargin-bottom: 16rpx;\n}\n\n.param-label {\n\tcolor: #999999;\n\tmargin-right: 16rpx;\n}\n\n.param-value {\n\tcolor: #333333;\n\tflex: 1;\n}\n\n.detail-text {\n\tdisplay: block;\n\tmargin-bottom: 12rpx;\n}\n\n.bottom-bar {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground-color: #ffffff;\n\tpadding: 20rpx 30rpx;\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n\tz-index: 100;\n}\n\n.buy-button {\n\twidth: 100%;\n\theight: 88rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tborder-radius: 44rpx;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\tborder: none;\n\tbox-shadow: 0 4rpx 12rpx rgba(144, 210, 108, 0.4);\n}\n\n.buy-button::after {\n\tborder: none;\n}\n\n/* è”ç³»å®¢æœæŒ‰é’® */\n.contact-service-btn {\n\twidth: 100%;\n\theight: 80rpx;\n\tbackground: linear-gradient(135deg, #4CAF50 0%, #297512 100%);\n\tcolor: #ffffff;\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tborder-radius: 40rpx;\n\tborder: none;\n\tline-height: 80rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 0;\n}\n\n.contact-service-btn::after {\n\tborder: none;\n}\n\n.service-emoji {\n\tmargin-right: 8rpx;\n\tfont-size: 32rpx;\n}\n\n.button-hover {\n\topacity: 0.85;\n}\n</style>\n\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/product-detail/product-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getProductDetail","isLoggedIn","openCustomerServiceForProduct"],"mappings":";;;;;AAmFA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,WAAW;AAAA,MACX,SAAS,CAAC;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,IAAI;AACf,WAAK,YAAY,QAAQ;AACzB,WAAK,kBAAiB;AAAA,IACvB;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,oBAAoB;AACzB,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,QACR,CAAC;AAED,cAAM,SAAS,MAAMC,YAAAA,iBAAiB,KAAK,SAAS;AACpD,aAAK,UAAU,UAAU;AAEzBD,sBAAG,MAAC,YAAW;AAAA,MACd,SAAO,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,sBAAA,MAAA,MAAA,SAAA,kDAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAID,eAAe,MAAM;AACpB,YAAM,QAAQ;AAAA,QACb,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA;AAEJ,aAAO,MAAM,IAAI,KAAK;AAAA,IACtB;AAAA;AAAA,IAGD,YAAY;AACX,UAAI,CAACE,WAAU,WAAA,GAAI;AAClBF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK,gFAAgF,KAAK;AAAA,UAC3F,CAAC;AAAA,QACD,GAAE,GAAI;AACP;AAAA,MACD;AAGAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,gDAAgD,KAAK,SAAS;AAAA,MACpE,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,uBAAuB;AACtBG,0DAA8B;AAAA,QAC7B,IAAI,KAAK,QAAQ;AAAA,QACjB,MAAM,KAAK,QAAQ;AAAA,MACpB,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;AC/JA,GAAG,WAAW,eAAe;"}