{"version":3,"file":"redemption-records.js","sources":["pages/redemption-records/redemption-records.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVkZW1wdGlvbi1yZWNvcmRzL3JlZGVtcHRpb24tcmVjb3Jkcy52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"container\">\n\t\t\t<!-- å…‘æ¢è®°å½•åˆ—è¡¨ -->\n\t\t\t<view class=\"record-list\" v-if=\"records.length > 0\">\n\t\t\t\t<view \n\t\t\t\t\tclass=\"record-item\" \n\t\t\t\t\tv-for=\"record in records\" \n\t\t\t\t\t:key=\"record.id\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"item-header\">\n\t\t\t\t\t\t<view class=\"product-info\">\n\t\t\t\t\t\t\t<text class=\"product-icon\">{{ getProductIcon(record.productType) }}</text>\n\t\t\t\t\t\t\t<text class=\"product-name\">{{ record.productName }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"status-tag\" :class=\"getStatusClass(record.status)\">{{ record.statusText }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"item-body\">\n\t\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t\t<text class=\"label\">å…‘æ¢è®°å½•å·</text>\n\t\t\t\t\t\t\t<text class=\"value\">{{ record.recordNo }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"info-row\" v-if=\"record.redemptionCode\">\n\t\t\t\t\t\t\t<text class=\"label\">å…‘æ¢ç </text>\n\t\t\t\t\t\t\t<text class=\"value code-text\">{{ record.redemptionCode }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t\t<text class=\"label\">å•†å“ç±»å‹</text>\n\t\t\t\t\t\t\t<text class=\"value\">{{ record.productTypeText }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t\t<text class=\"label\">å…‘æ¢æ—¶é—´</text>\n\t\t\t\t\t\t\t<text class=\"value\">{{ formatDateTime(record.createTime) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"info-row\" v-if=\"record.completeTime\">\n\t\t\t\t\t\t\t<text class=\"label\">å®Œæˆæ—¶é—´</text>\n\t\t\t\t\t\t\t<text class=\"value\">{{ formatDateTime(record.completeTime) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"info-row\" v-if=\"record.trackingNumber\">\n\t\t\t\t\t\t\t<text class=\"label\">ç‰©æµå•å·</text>\n\t\t\t\t\t\t\t<text class=\"value tracking-text\">{{ record.trackingNumber }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- æŸ¥çœ‹è¯¦æƒ…æŒ‰é’® -->\n\t\t\t\t\t<view class=\"item-footer\">\n\t\t\t\t\t\t<button class=\"detail-btn\" @click=\"viewRecordDetail(record)\" hover-class=\"detail-btn-hover\">\n\t\t\t\t\t\t\tä½¿ç”¨/æŸ¥çœ‹è¯¦æƒ…\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- ç©ºçŠ¶æ€ -->\n\t\t\t<view class=\"empty-state\" v-else-if=\"!loading\">\n\t\t\t\t<view class=\"empty-icon\">ğŸ¼</view>\n\t\t\t\t<text class=\"empty-text\">æš‚æ— å…‘æ¢è®°å½•</text>\n\t\t\t\t<text class=\"empty-tip\">å…‘æ¢åçš„è®°å½•å°†åœ¨è¿™é‡Œæ˜¾ç¤º</text>\n\t\t\t\t<button class=\"goto-redeem-btn\" @click=\"handleGotoRedeem\" hover-class=\"button-hover\">ç«‹å³å…‘æ¢</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { getMyRedemptionRecords } from '../../api/redemption.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\trecords: [],\n\t\t\tloading: false\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.loadRecords();\n\t},\n\tonShow() {\n\t\t// æ¯æ¬¡æ˜¾ç¤ºé¡µé¢æ—¶åˆ·æ–°æ•°æ®\n\t\tthis.loadRecords();\n\t},\n\tmethods: {\n\t\t// åŠ è½½å…‘æ¢è®°å½•\n\t\tasync loadRecords() {\n\t\t\tif (this.loading) return;\n\t\t\t\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\ttry {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: 'åŠ è½½ä¸­...',\n\t\t\t\t\tmask: true\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconst result = await getMyRedemptionRecords();\n\t\t\t\tthis.records = result || [];\n\t\t\t\t\n\t\t\t\tuni.hideLoading();\n\t\t\t} catch (error) {\n\t\t\t\tuni.hideLoading();\n\t\t\t\tconsole.error('åŠ è½½å…‘æ¢è®°å½•å¤±è´¥:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// è·å–å•†å“å›¾æ ‡\n\t\tgetProductIcon(productType) {\n\t\t\tswitch(productType) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn 'ğŸ«'; // å¹´å¡\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'ğŸŸï¸'; // æœˆå¡\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'ğŸª'; // æ¬¡ç¥¨\n\t\t\t\tcase 4:\n\t\t\t\t\treturn 'ğŸ'; // å®ç‰©\n\t\t\t\tcase 5:\n\t\t\t\t\treturn 'ğŸ“¦'; // ç»„åˆ\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'ğŸ';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// è·å–çŠ¶æ€æ ·å¼\n\t\tgetStatusClass(status) {\n\t\t\tswitch(status) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn 'status-processing';\n\t\t\t\tcase 1:\n\t\t\t\t\treturn 'status-completed';\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'status-shipped';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´\n\t\tformatDateTime(dateTime) {\n\t\t\tif (!dateTime) return '-';\n\t\t\tconst date = new Date(dateTime);\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0');\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\n\t\t\tconst hours = String(date.getHours()).padStart(2, '0');\n\t\t\tconst minutes = String(date.getMinutes()).padStart(2, '0');\n\t\t\treturn `${year}-${month}-${day} ${hours}:${minutes}`;\n\t\t},\n\t\t\n\t\t// è·³è½¬åˆ°å…‘æ¢é¡µé¢\n\t\thandleGotoRedeem() {\n\t\t\tuni.switchTab({\n\t\t\t\turl: '/pages/personal/personal'\n\t\t\t});\n\t\t},\n\t\t\n\t\t// æŸ¥çœ‹å…‘æ¢è®°å½•è¯¦æƒ…\n\t\tviewRecordDetail(record) {\n\t\t\tif (!record) return;\n\t\t\t\n\t\t\t// è·³è½¬åˆ°è¯¦æƒ…é¡µé¢\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/redemption-detail/redemption-detail?data=' + encodeURIComponent(JSON.stringify(record))\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n\tpadding: 20rpx 0;\n}\n\n.container {\n\tpadding: 0 30rpx;\n}\n\n/* è®°å½•åˆ—è¡¨ */\n.record-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.record-item {\n\tbackground-color: #ffffff;\n\tborder-radius: 16rpx;\n\toverflow: hidden;\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n}\n\n.item-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 24rpx;\n\tbackground: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);\n\tborder-bottom: 1rpx solid #f0f0f0;\n}\n\n.product-info {\n\tflex: 1;\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-right: 20rpx;\n}\n\n.product-icon {\n\tfont-size: 32rpx;\n\tmargin-right: 12rpx;\n}\n\n.product-name {\n\tflex: 1;\n\tfont-size: 30rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.status-tag {\n\tflex-shrink: 0;\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 20rpx;\n\tfont-size: 24rpx;\n\tfont-weight: 500;\n}\n\n.status-processing {\n\tbackground-color: #fff9e6;\n\tcolor: #f5a623;\n\tborder: 1rpx solid #f5a623;\n}\n\n.status-completed {\n\tbackground-color: #f0f9f0;\n\tcolor: #90d26c;\n\tborder: 1rpx solid #90d26c;\n}\n\n.status-shipped {\n\tbackground-color: #f5f5f5;\n\tcolor: #666666;\n\tborder: 1rpx solid #e0e0e0;\n}\n\n.item-body {\n\tpadding: 20rpx 24rpx;\n}\n\n.info-row {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: flex-start;\n\tmargin-bottom: 16rpx;\n\tpadding: 8rpx 0;\n}\n\n.info-row:last-child {\n\tmargin-bottom: 0;\n}\n\n.label {\n\tfont-size: 26rpx;\n\tcolor: #999999;\n\tflex-shrink: 0;\n}\n\n.value {\n\tfont-size: 26rpx;\n\tcolor: #333333;\n\ttext-align: right;\n\tword-break: break-all;\n\tmargin-left: 20rpx;\n}\n\n.code-text {\n\tfont-family: 'Courier New', monospace;\n\tcolor: #90d26c;\n\tfont-weight: bold;\n}\n\n.tracking-text {\n\tcolor: #666666;\n\tfont-weight: 500;\n}\n\n/* ç©ºçŠ¶æ€ */\n.empty-state {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 120rpx 30rpx;\n}\n\n.empty-icon {\n\tfont-size: 120rpx;\n\topacity: 0.3;\n\tmargin-bottom: 30rpx;\n}\n\n.empty-text {\n\tfont-size: 30rpx;\n\tcolor: #666666;\n\tfont-weight: 500;\n\tmargin-bottom: 12rpx;\n}\n\n.empty-tip {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n\tmargin-bottom: 40rpx;\n}\n\n.goto-redeem-btn {\n\twidth: 240rpx;\n\theight: 72rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tcolor: #ffffff;\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tborder-radius: 36rpx;\n\tborder: none;\n\tline-height: 72rpx;\n}\n\n.goto-redeem-btn::after {\n\tborder: none;\n}\n\n.button-hover {\n\topacity: 0.85;\n}\n\n/* æŸ¥çœ‹è¯¦æƒ…æŒ‰é’® */\n.item-footer {\n\tpadding: 0 24rpx 24rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.detail-btn {\n\twidth: 100%;\n\theight: 76rpx;\n\tbackground-color: #ffffff;\n\tcolor: #297512;\n\tfont-size: 30rpx;\n\tfont-weight: bold;\n\tborder-radius: 12rpx;\n\tborder: 2rpx solid #297512;\n\tline-height: 76rpx;\n\ttext-align: center;\n}\n\n.detail-btn::after {\n\tborder: none;\n}\n\n.detail-btn-hover {\n\tbackground-color: #f0f9f0;\n\topacity: 0.9;\n}\n</style>\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/redemption-records/redemption-records.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getMyRedemptionRecords"],"mappings":";;;AAoEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS,CAAE;AAAA,MACX,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,SAAS;AAER,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,cAAc;AACnB,UAAI,KAAK;AAAS;AAElB,WAAK,UAAU;AAEf,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAED,cAAM,SAAS,MAAMC,eAAAA;AACrB,aAAK,UAAU,UAAU;AAEzBD,sBAAG,MAAC,YAAW;AAAA,MACd,SAAO,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,sBAAA,MAAA,MAAA,SAAA,0DAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF,UAAU;AACT,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA;AAAA,IAGD,eAAe,aAAa;AAC3B,cAAO,aAAW;AAAA,QACjB,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR;AACC,iBAAO;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAGD,eAAe,QAAQ;AACtB,cAAO,QAAM;AAAA,QACZ,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR;AACC,iBAAO;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAGD,eAAe,UAAU;AACxB,UAAI,CAAC;AAAU,eAAO;AACtB,YAAM,OAAO,IAAI,KAAK,QAAQ;AAC9B,YAAM,OAAO,KAAK;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACzD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IAClD;AAAA;AAAA,IAGD,mBAAmB;AAClBA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,iBAAiB,QAAQ;AACxB,UAAI,CAAC;AAAQ;AAGbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,qDAAqD,mBAAmB,KAAK,UAAU,MAAM,CAAC;AAAA,MACpG,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3KA,GAAG,WAAW,eAAe;"}