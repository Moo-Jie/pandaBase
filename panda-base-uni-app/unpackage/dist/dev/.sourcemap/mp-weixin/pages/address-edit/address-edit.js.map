{"version":3,"file":"address-edit.js","sources":["pages/address-edit/address-edit.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkcmVzcy1lZGl0L2FkZHJlc3MtZWRpdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"page\">\r\n\t\t<view class=\"container\">\r\n\t\t\t<view class=\"form-section\">\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view class=\"form-label\">\r\n\t\t\t\t\t\t<text class=\"required\">*</text>\r\n\t\t\t\t\t\t<text>收货人</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input class=\"form-input\" v-model=\"form.receiverName\" placeholder=\"请输入收货人姓名\" maxlength=\"50\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view class=\"form-label\">\r\n\t\t\t\t\t\t<text class=\"required\">*</text>\r\n\t\t\t\t\t\t<text>联系电话</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<input class=\"form-input\" v-model=\"form.phone\" type=\"number\" placeholder=\"请输入手机号\" maxlength=\"11\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<view class=\"form-label\">\r\n\t\t\t\t\t<text class=\"required\">*</text>\r\n\t\t\t\t\t<text>所在地区</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<picker \r\n\t\t\t\t\tmode=\"region\" \r\n\t\t\t\t\t:value=\"regionArray\"\r\n\t\t\t\t\t@change=\"handleRegionChange\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"region-picker\">\r\n\t\t\t\t\t\t<text class=\"region-text\" v-if=\"regionText\">{{ regionText }}</text>\r\n\t\t\t\t\t\t<text class=\"placeholder\" v-else>请选择省市区</text>\r\n\t\t\t\t\t\t<text class=\"arrow\">›</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view class=\"form-label\">\r\n\t\t\t\t\t\t<text class=\"required\">*</text>\r\n\t\t\t\t\t\t<text>详细地址</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<textarea \r\n\t\t\t\t\t\tclass=\"form-textarea\" \r\n\t\t\t\t\t\tv-model=\"form.detailAddress\" \r\n\t\t\t\t\t\tplaceholder=\"请输入详细地址（街道、门牌号等）\" \r\n\t\t\t\t\t\tmaxlength=\"200\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<view class=\"default-switch\">\r\n\t\t\t\t\t\t<text class=\"switch-label\">设为默认地址</text>\r\n\t\t\t\t\t\t<switch :checked=\"form.isDefault\" @change=\"handleDefaultChange\" color=\"#90d26c\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部按钮 -->\r\n\t\t<view class=\"bottom-bar\">\r\n\t\t\t<button class=\"save-btn\" @click=\"handleSave\" :loading=\"saving\" :disabled=\"saving\" hover-class=\"button-hover\">保存地址</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { addAddress } from '../../api/address.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tform: {\r\n\t\t\t\treceiverName: '',\r\n\t\t\t\tphone: '',\r\n\t\t\t\tprovince: '',\r\n\t\t\t\tcity: '',\r\n\t\t\t\tdistrict: '',\r\n\t\t\t\tdetailAddress: '',\r\n\t\t\t\tisDefault: false\r\n\t\t\t},\r\n\t\t\tregionArray: [], // 微信原生地区选择器的值 [省, 市, 区]\r\n\t\t\tregionText: '',\r\n\t\t\tsaving: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 地区选择完成（使用微信原生组件）\r\n\t\thandleRegionChange(e) {\r\n\t\t\tconst region = e.detail.value; // [省, 市, 区]\r\n\t\t\tthis.regionArray = region;\r\n\t\t\t\r\n\t\t\tthis.form.province = region[0];\r\n\t\t\tthis.form.city = region[1];\r\n\t\t\tthis.form.district = region[2];\r\n\t\t\tthis.regionText = `${region[0]} ${region[1]} ${region[2]}`;\r\n\t\t},\r\n\t\t\r\n\t\t// 默认地址切换\r\n\t\thandleDefaultChange(e) {\r\n\t\t\tthis.form.isDefault = e.detail.value;\r\n\t\t},\r\n\t\t\r\n\t\t// 验证表单\r\n\t\tvalidateForm() {\r\n\t\t\tif (!this.form.receiverName) {\r\n\t\t\t\tuni.showToast({ title: '请输入收货人姓名', icon: 'none' });\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!this.form.phone) {\r\n\t\t\t\tuni.showToast({ title: '请输入联系电话', icon: 'none' });\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!/^1[3-9]\\d{9}$/.test(this.form.phone)) {\r\n\t\t\t\tuni.showToast({ title: '请输入正确的手机号', icon: 'none' });\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!this.form.province || !this.form.city || !this.form.district) {\r\n\t\t\t\tuni.showToast({ title: '请选择所在地区', icon: 'none' });\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!this.form.detailAddress) {\r\n\t\t\t\tuni.showToast({ title: '请输入详细地址', icon: 'none' });\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t\r\n\t\t// 保存地址\r\n\t\tasync handleSave() {\r\n\t\t\tif (!this.validateForm()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.saving) return;\r\n\t\t\tthis.saving = true;\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tuni.showLoading({ title: '保存中...', mask: true });\r\n\t\t\t\t\r\n\t\t\t\tawait addAddress(this.form);\r\n\t\t\t\t\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t}, 1500);\r\n\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tconsole.error('保存地址失败:', error);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.page {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f5f5f5;\r\n\tpadding-bottom: 120rpx;\r\n}\r\n\r\n.container {\r\n\tpadding: 20rpx 30rpx;\r\n}\r\n\r\n.form-section {\r\n\tbackground-color: #ffffff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 30rpx;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.form-item {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.form-item:last-child {\r\n\tmargin-bottom: 0;\r\n}\r\n\r\n.form-label {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333333;\r\n\tfont-weight: 500;\r\n\tmargin-bottom: 16rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.required {\r\n\tcolor: #f56c6c;\r\n\tmargin-right: 4rpx;\r\n}\r\n\r\n.form-input, .form-textarea {\r\n\twidth: 90%;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 16rpx 20rpx;\r\n\tfont-size: 28rpx;\r\n\tcolor: #333333;\r\n\tborder: 1rpx solid #e0e0e0;\r\n}\r\n\r\n.form-input {\r\n\theight: 80rpx;\r\n}\r\n\r\n.form-textarea {\r\n\tmin-height: 160rpx;\r\n}\r\n\r\n.region-picker {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\theight: 80rpx;\r\n\tbackground-color: #f5f5f5;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 0 20rpx;\r\n\tborder: 1rpx solid #e0e0e0;\r\n}\r\n\r\n.region-text {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333333;\r\n}\r\n\r\n.placeholder {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n.arrow {\r\n\tfont-size: 36rpx;\r\n\tcolor: #cccccc;\r\n}\r\n\r\n.default-switch {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: 16rpx 0;\r\n}\r\n\r\n.switch-label {\r\n\tfont-size: 28rpx;\r\n\tcolor: #333333;\r\n}\r\n\r\n/* 底部按钮 */\r\n.bottom-bar {\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbackground-color: #ffffff;\r\n\tpadding: 20rpx 30rpx;\r\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n\tz-index: 100;\r\n}\r\n\r\n.save-btn {\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\r\n\tborder-radius: 44rpx;\r\n\tfont-size: 32rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n}\r\n\r\n.save-btn[disabled] {\r\n\topacity: 0.6;\r\n}\r\n\r\n.save-btn::after {\r\n\tborder: none;\r\n}\r\n\r\n.button-hover {\r\n\topacity: 0.85;\r\n}\r\n\r\n/* 空状态和地址列表样式复用address-list页面 */\r\n.empty-state {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tpadding: 120rpx 30rpx;\r\n}\r\n\r\n.empty-icon {\r\n\tfont-size: 120rpx;\r\n\tmargin-bottom: 30rpx;\r\n\topacity: 0.3;\r\n}\r\n\r\n.empty-text {\r\n\tfont-size: 30rpx;\r\n\tcolor: #666666;\r\n\tmargin-bottom: 12rpx;\r\n}\r\n\r\n.empty-tip {\r\n\tfont-size: 24rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n.address-list {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 20rpx;\r\n}\r\n\r\n.address-item {\r\n\tbackground-color: #ffffff;\r\n\tborder-radius: 16rpx;\r\n\tpadding: 30rpx;\r\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.address-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.add-btn {\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\r\n\tborder-radius: 44rpx;\r\n\tfont-size: 30rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.add-btn::after {\r\n\tborder: none;\r\n}\r\n\r\n.btn-icon {\r\n\tfont-size: 32rpx;\r\n\tmargin-right: 8rpx;\r\n}\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/address-edit/address-edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","addAddress"],"mappings":";;;AAsEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,MAAM;AAAA,QACL,cAAc;AAAA,QACd,OAAO;AAAA,QACP,UAAU;AAAA,QACV,MAAM;AAAA,QACN,UAAU;AAAA,QACV,eAAe;AAAA,QACf,WAAW;AAAA,MACX;AAAA,MACD,aAAa,CAAE;AAAA;AAAA,MACf,YAAY;AAAA,MACZ,QAAQ;AAAA,IACT;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,mBAAmB,GAAG;AACrB,YAAM,SAAS,EAAE,OAAO;AACxB,WAAK,cAAc;AAEnB,WAAK,KAAK,WAAW,OAAO,CAAC;AAC7B,WAAK,KAAK,OAAO,OAAO,CAAC;AACzB,WAAK,KAAK,WAAW,OAAO,CAAC;AAC7B,WAAK,aAAa,GAAG,OAAO,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC;AAAA,IACxD;AAAA;AAAA,IAGD,oBAAoB,GAAG;AACtB,WAAK,KAAK,YAAY,EAAE,OAAO;AAAA,IAC/B;AAAA;AAAA,IAGD,eAAe;AACd,UAAI,CAAC,KAAK,KAAK,cAAc;AAC5BA,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAK,CAAG;AACjD,eAAO;AAAA,MACR;AACA,UAAI,CAAC,KAAK,KAAK,OAAO;AACrBA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAChD,eAAO;AAAA,MACR;AACA,UAAI,CAAC,gBAAgB,KAAK,KAAK,KAAK,KAAK,GAAG;AAC3CA,sBAAG,MAAC,UAAU,EAAE,OAAO,aAAa,MAAM,OAAK,CAAG;AAClD,eAAO;AAAA,MACR;AACA,UAAI,CAAC,KAAK,KAAK,YAAY,CAAC,KAAK,KAAK,QAAQ,CAAC,KAAK,KAAK,UAAU;AAClEA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAChD,eAAO;AAAA,MACR;AACA,UAAI,CAAC,KAAK,KAAK,eAAe;AAC7BA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAChD,eAAO;AAAA,MACR;AACA,aAAO;AAAA,IACP;AAAA;AAAA,IAGD,MAAM,aAAa;AAClB,UAAI,CAAC,KAAK,gBAAgB;AACzB;AAAA,MACD;AAEA,UAAI,KAAK;AAAQ;AACjB,WAAK,SAAS;AAEd,UAAI;AACHA,sBAAG,MAAC,YAAY,EAAE,OAAO,UAAU,MAAM,KAAG,CAAG;AAE/C,cAAMC,YAAU,WAAC,KAAK,IAAI;AAE1BD,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAED,mBAAW,MAAM;AAChBA,wBAAG,MAAC,aAAY;AAAA,QAChB,GAAE,IAAI;AAAA,MAEN,SAAO,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,sBAAA,MAAA,MAAA,SAAA,8CAAc,WAAW,KAAK;AAAA,MAC/B,UAAU;AACT,aAAK,SAAS;AAAA,MACf;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;AChKA,GAAG,WAAW,eAAe;"}