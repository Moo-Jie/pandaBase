{"version":3,"file":"my-cards.js","sources":["pages/my-cards/my-cards.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXktY2FyZHMvbXktY2FyZHMudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"container\" v-if=\"productList.length > 0\">\n\t\t\t<!-- å•†å“åˆ—è¡¨ -->\n\t\t\t<view class=\"product-list\">\n\t\t\t\t<view\n\t\t\t\t\tclass=\"product-card\"\n\t\t\t\t\tv-for=\"item in productList\" \n\t\t\t\t\t:key=\"item.id + '-' + item.type\"\n\t\t\t\t\t@click=\"handleProductClick(item)\"\n\t\t\t\t>\n\t\t\t\t\t<!-- èƒŒæ™¯å›¾ç‰‡ -->\n\t\t\t\t\t<image class=\"card-bg-image\" :src=\"item.imageUrl || '/static/images/logo.png'\" mode=\"widthFix\"></image>\n\t\t\t\t\t\n\t\t\t\t\t<!-- å¡ç‰‡å†…å®¹ -->\n\t\t\t\t\t<view class=\"card-content\">\n\t\t\t\t\t\t<!-- å¤´éƒ¨ä¿¡æ¯ -->\n\t\t\t\t\t\t<view class=\"content-header\">\n\t\t\t\t\t\t\t<text class=\"product-name\">åç§°ï¼š{{ item.name }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- åº•éƒ¨ä¿¡æ¯ -->\n\t\t\t\t\t\t<view class=\"content-footer\">\n\t\t\t\t\t\t\t<text class=\"product-type\">ç±»å‹ï¼š{{ item.typeText }}</text>\n\t\t\t\t\t\t\t<!-- æœ‰æ•ˆæœŸæ ‡ç­¾ï¼ˆä¼šå‘˜å¡ï¼‰ -->\n\t\t\t\t\t\t\t<text class=\"validity-date\" v-if=\"item.type <= 3 && item.endTime\">è‡³ {{ formatDate(item.endTime) }}</text>\n\t\t\t\t\t\t\t<!-- æ¬¡ç¥¨æ˜¾ç¤ºå‰©ä½™æ¬¡æ•° -->\n\t\t\t\t\t\t\t<text class=\"remain-count\" v-if=\"item.type === 3\">å‰©ä½™ {{ item.remainCount }} æ¬¡</text>\n\t\t\t\t\t\t\t<!-- å®ä½“å•†å“æ˜¾ç¤ºæ•°é‡ -->\n\t\t\t\t\t\t\t<text class=\"quantity\" v-if=\"item.type === 4\">x{{ item.quantity }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- ç©ºçŠ¶æ€ -->\n\t\t<view class=\"empty-state\" v-else-if=\"!loading\">\n\t\t\t<text class=\"empty-icon\">ğŸ</text>\n\t\t\t<text class=\"empty-text\">æš‚æ— å•†å“</text>\n\t\t\t<text class=\"empty-tip\">è´­ä¹°æˆ–å…‘æ¢å•†å“åå°†åœ¨æ­¤æ˜¾ç¤º</text>\n\t\t\t<button class=\"go-mall-btn\" @click=\"goMall\">å»å•†åŸçœ‹çœ‹</button>\n\t\t</view>\n\t\t\n\t\t<!-- åŠ è½½çŠ¶æ€ -->\n\t\t<view class=\"loading-state\" v-if=\"loading\">\n\t\t\t<text class=\"loading-text\">åŠ è½½ä¸­...</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { get } from '../../utils/request.js';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tproductList: [],\n\t\t\tloading: false\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.loadProducts();\n\t},\n\tonShow() {\n\t\t// æ¯æ¬¡æ˜¾ç¤ºæ—¶åˆ·æ–°\n\t\tthis.loadProducts();\n\t},\n\tmethods: {\n\t\t// åŠ è½½æ‰€æœ‰å•†å“ï¼ˆä¼šå‘˜å¡ + å®ä½“å•†å“ï¼‰\n\t\tasync loadProducts() {\n\t\t\tthis.loading = true;\n\t\t\ttry {\n\t\t\t\tconst result = await get('/userProduct/my/list', {});\n\t\t\t\tthis.productList = result || [];\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('åŠ è½½å•†å“å¤±è´¥:', error);\n\t\t\t\tthis.productList = [];\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\n\t\t// è·å–å¡ç‰‡å›¾æ ‡\n\t\tgetCardIcon(cardType) {\n\t\t\tswitch(cardType) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn 'ğŸ‘‘';\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'ğŸ’';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'ğŸ«';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'ğŸ’³';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// è·å–çŠ¶æ€ç±»å\n\t\tgetStatusClass(status) {\n\t\t\tswitch(status) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn 'status-inactive';\n\t\t\t\tcase 1:\n\t\t\t\t\treturn 'status-active';\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'status-expired';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'status-invalid';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// æ ¼å¼åŒ–æ—¥æœŸ\n\t\tformatDate(dateTime) {\n\t\t\tif (!dateTime) return '-';\n\t\t\tconst date = new Date(dateTime);\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0');\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\n\t\t\treturn `${year}-${month}-${day}`;\n\t\t},\n\t\t\n\t\t// å¤„ç†å•†å“ç‚¹å‡»\n\t\thandleProductClick(item) {\n\t\t\tif (item.type === 4) {\n\t\t\t\t// å®ä½“å•†å“ï¼šæç¤ºè”ç³»å®¢æœ\n\t\t\t\tconst content = `|å•†å“åç§°ï¼š${item.name}\\n\\n|å•†å“æ•°é‡ï¼š${item.quantity} ä»¶\\n\\n| æ ¸é”€æ–¹å¼ï¼š\\nè¯·è”ç³»å®¢æœå‡ºç¤ºå½“å‰å‡­è¯è¿›è¡Œçº¿ä¸‹å…‘æ¢\\n\\n| å®¢æœçƒ­çº¿ï¼š400-656-00555`;\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'å®ä½“å•†å“è¯¦æƒ…',\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tconfirmText: 'æˆ‘çŸ¥é“äº†',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// ä¼šå‘˜å¡ï¼šæ˜¾ç¤ºè¯¦æƒ…\n\t\t\t\tconst emoji = item.type === 1 ? 'ğŸ‘‘' : item.type === 2 ? 'ğŸ’' : 'ğŸ«';\n\t\t\t\tlet content = `|ä¼šå‘˜å¡å·ï¼š\\n${item.cardNumber || 'æš‚æ— '}\\n\\n`;\n\t\t\t\tcontent += `|å½“å‰çŠ¶æ€ï¼š${item.statusText}\\n\\n`;\n\t\t\t\t\n\t\t\t\tif (item.type === 3) {\n\t\t\t\t\tcontent += `|å‰©ä½™æ¬¡æ•°ï¼š${item.remainCount} æ¬¡`;\n\t\t\t\t} else {\n\t\t\t\t\tcontent += `|æœ‰æ•ˆæœŸè‡³ï¼š\\n${this.formatDate(item.endTime)}`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: `${emoji} ${item.name}`,\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tconfirmText: 'æˆ‘çŸ¥é“äº†',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// å»å•†åŸ\n\t\tgoMall() {\n\t\t\tuni.switchTab({\n\t\t\t\turl: '/pages/mall/mall'\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n}\n\n.container {\n\tpadding: 30rpx;\n}\n\n.product-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 24rpx;\n}\n\n.product-card {\n\tposition: relative;\n\tborder-radius: 24rpx;\n\toverflow: hidden;\n\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.12);\n\ttransition: transform 0.2s;\n}\n\n.product-card:active {\n\ttransform: scale(0.98);\n}\n\n/* èƒŒæ™¯å›¾ç‰‡ */\n.card-bg-image {\n\twidth: 100%;\n\theight: auto;\n\tdisplay: block;\n}\n\n/* é®ç½©å±‚ */\n.card-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.5) 100%);\n\tz-index: 1;\n}\n\n/* å†…å®¹å±‚ */\n.card-content {\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 2;\n\tpadding: 24rpx 30rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 16rpx;\n}\n\n.content-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.product-name {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.6);\n\tflex: 1;\n\tmargin-right: 16rpx;\n}\n\n.content-footer {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.product-type {\n\tfont-size: 26rpx;\n\tcolor: rgba(255, 255, 255, 0.95);\n\ttext-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.5);\n\tfont-weight: 500;\n}\n\n.validity-date, .remain-count, .quantity {\n\tfont-size: 28rpx;\n\tcolor: #ffffff;\n\tfont-weight: bold;\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.6);\n\tbackground: rgba(255, 255, 255, 0.2);\n\tpadding: 8rpx 20rpx;\n\tborder-radius: 24rpx;\n\tbackdrop-filter: blur(10rpx);\n}\n\n/* å·²è¿‡æœŸ/å·²ä½œåºŸ/å·²æ ¸é”€ */\n.product-card.disabled {\n\topacity: 0.6;\n}\n\n/* å•†å“çŠ¶æ€æ ‡ç­¾ */\n.product-status {\n\tpadding: 6rpx 16rpx;\n\tborder-radius: 20rpx;\n\tfont-size: 22rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n}\n\n.card-status {\n\tpadding: 8rpx 20rpx;\n\tborder-radius: 20rpx;\n\tfont-size: 22rpx;\n\tcolor: #ffffff;\n\tbackground: rgba(255, 255, 255, 0.3);\n}\n\n.status-active {\n\tbackground: rgba(76, 175, 80, 0.8);\n}\n\n.status-expired {\n\tbackground: rgba(255, 68, 68, 0.8);\n}\n\n/* å¡ç‰‡ä¸»ä½“ */\n.card-body {\n\tmargin-bottom: 30rpx;\n}\n\n.card-number {\n\tdisplay: block;\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\tletter-spacing: 4rpx;\n\tmargin-bottom: 16rpx;\n}\n\n.product-name {\n\tdisplay: block;\n\tfont-size: 28rpx;\n\tcolor: rgba(255, 255, 255, 0.9);\n}\n\n/* å¡ç‰‡åº•éƒ¨ */\n.card-footer {\n\t\n}\n\n.validity-info {\n\tdisplay: flex;\n\talign-items: baseline;\n}\n\n.validity-info .label {\n\tfont-size: 24rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n\tmargin-right: 8rpx;\n}\n\n.validity-info .value {\n\tfont-size: 28rpx;\n\tcolor: #ffffff;\n\tfont-weight: 500;\n\tmargin-right: 8rpx;\n}\n\n.validity-info .remain {\n\tfont-size: 22rpx;\n\tcolor: rgba(255, 255, 255, 0.7);\n}\n\n/* ç©ºçŠ¶æ€ */\n.empty-state {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tmin-height: 80vh;\n\tpadding: 60rpx;\n}\n\n.empty-icon {\n\tfont-size: 160rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.empty-text {\n\tfont-size: 32rpx;\n\tcolor: #333333;\n\tfont-weight: bold;\n\tmargin-bottom: 16rpx;\n}\n\n.empty-tip {\n\tfont-size: 26rpx;\n\tcolor: #999999;\n\tmargin-bottom: 40rpx;\n}\n\n.go-mall-btn {\n\twidth: 300rpx;\n\theight: 80rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tborder-radius: 40rpx;\n\tfont-size: 28rpx;\n\tcolor: #ffffff;\n\tborder: none;\n\tline-height: 80rpx;\n}\n\n.go-mall-btn::after {\n\tborder: none;\n}\n\n/* åŠ è½½çŠ¶æ€ */\n.loading-state {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-height: 80vh;\n}\n\n.loading-text {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n}\n</style>\n\n\n\n\n\n\n\n\n\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/my-cards/my-cards.vue'\nwx.createPage(MiniProgramPage)"],"names":["get","uni"],"mappings":";;;AAqDA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,aAAa,CAAE;AAAA,MACf,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,aAAY;AAAA,EACjB;AAAA,EACD,SAAS;AAER,SAAK,aAAY;AAAA,EACjB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,eAAe;AACpB,WAAK,UAAU;AACf,UAAI;AACH,cAAM,SAAS,MAAMA,cAAAA,IAAI,wBAAwB,CAAE,CAAA;AACnD,aAAK,cAAc,UAAU;MAC5B,SAAO,OAAO;AACfC,sBAAA,MAAA,MAAA,SAAA,qCAAc,WAAW,KAAK;AAC9B,aAAK,cAAc;MACpB,UAAU;AACT,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA;AAAA,IAGD,YAAY,UAAU;AACrB,cAAO,UAAQ;AAAA,QACd,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR;AACC,iBAAO;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAGD,eAAe,QAAQ;AACtB,cAAO,QAAM;AAAA,QACZ,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR;AACC,iBAAO;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAGD,WAAW,UAAU;AACpB,UAAI,CAAC;AAAU,eAAO;AACtB,YAAM,OAAO,IAAI,KAAK,QAAQ;AAC9B,YAAM,OAAO,KAAK;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAC9B;AAAA;AAAA,IAGD,mBAAmB,MAAM;AACxB,UAAI,KAAK,SAAS,GAAG;AAEpB,cAAM,UAAU,SAAS,KAAK,IAAI;AAAA;AAAA,QAAa,KAAK,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP;AAAA,UACA,aAAa;AAAA,UACb,YAAY;AAAA,QACb,CAAC;AAAA,aACK;AAEN,cAAM,QAAQ,KAAK,SAAS,IAAI,OAAO,KAAK,SAAS,IAAI,OAAO;AAChE,YAAI,UAAU;AAAA,EAAW,KAAK,cAAc,IAAI;AAAA;AAAA;AAChD,mBAAW,SAAS,KAAK,UAAU;AAAA;AAAA;AAEnC,YAAI,KAAK,SAAS,GAAG;AACpB,qBAAW,SAAS,KAAK,WAAW;AAAA,eAC9B;AACN,qBAAW;AAAA,EAAW,KAAK,WAAW,KAAK,OAAO,CAAC;AAAA,QACpD;AAEAA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,GAAG,KAAK,IAAI,KAAK,IAAI;AAAA,UAC5B;AAAA,UACA,aAAa;AAAA,UACb,YAAY;AAAA,QACb,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAGD,SAAS;AACRA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,MACN,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjKA,GAAG,WAAW,eAAe;"}