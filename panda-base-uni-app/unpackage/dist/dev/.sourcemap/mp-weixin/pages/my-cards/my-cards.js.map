{"version":3,"file":"my-cards.js","sources":["pages/my-cards/my-cards.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXktY2FyZHMvbXktY2FyZHMudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"page\">\r\n\t\t<view class=\"container\" v-if=\"productList.length > 0\">\r\n\t\t\t<!-- å•†å“åˆ—è¡¨ -->\r\n\t\t\t<view class=\"product-list\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"product-card\"\r\n\t\t\t\t\tv-for=\"item in productList\" \r\n\t\t\t\t\t:key=\"item.id + '-' + item.type\"\r\n\t\t\t\t\t@click=\"handleProductClick(item)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<!-- èƒŒæ™¯å›¾ç‰‡ -->\r\n\t\t\t\t\t<image class=\"card-bg-image\" :src=\"item.imageUrl || '/static/images/logo.png'\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- å¡ç‰‡å†…å®¹ -->\r\n\t\t\t\t\t<view class=\"card-content\">\r\n\t\t\t\t\t\t<!-- å¤´éƒ¨ä¿¡æ¯ -->\r\n\t\t\t\t\t\t<view class=\"content-header\">\r\n\t\t\t\t\t\t\t<text class=\"product-name\">åç§°ï¼š{{ item.name }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- åº•éƒ¨ä¿¡æ¯ -->\r\n\t\t\t\t\t\t<view class=\"content-footer\">\r\n\t\t\t\t\t\t\t<text class=\"product-type\">ç±»å‹ï¼š{{ item.typeText }}</text>\r\n\t\t\t\t\t\t\t<!-- æœ‰æ•ˆæœŸæ ‡ç­¾ï¼ˆä¼šå‘˜å¡ï¼‰ -->\r\n\t\t\t\t\t\t\t<text class=\"validity-date\" v-if=\"item.type <= 3 && item.endTime\">è‡³ {{ formatDate(item.endTime) }}</text>\r\n\t\t\t\t\t\t\t<!-- æ¬¡ç¥¨æ˜¾ç¤ºå‰©ä½™æ¬¡æ•° -->\r\n\t\t\t\t\t\t\t<text class=\"remain-count\" v-if=\"item.type === 3\">å‰©ä½™ {{ item.remainCount }} æ¬¡</text>\r\n\t\t\t\t\t\t\t<!-- å®ä½“å•†å“æ˜¾ç¤ºæ•°é‡ -->\r\n\t\t\t\t\t\t\t<text class=\"quantity\" v-if=\"item.type === 4\">x{{ item.quantity }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- ç©ºçŠ¶æ€ -->\r\n\t\t<view class=\"empty-state\" v-else-if=\"!loading\">\r\n\t\t\t<text class=\"empty-icon\">ğŸ</text>\r\n\t\t\t<text class=\"empty-text\">æš‚æ— å•†å“</text>\r\n\t\t\t<text class=\"empty-tip\">è´­ä¹°æˆ–å…‘æ¢å•†å“åå°†åœ¨æ­¤æ˜¾ç¤º</text>\r\n\t\t\t<button class=\"go-mall-btn\" @click=\"goMall\">å»å•†åŸçœ‹çœ‹</button>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- åŠ è½½çŠ¶æ€ -->\r\n\t\t<view class=\"loading-state\" v-if=\"loading\">\r\n\t\t\t<text class=\"loading-text\">åŠ è½½ä¸­...</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { get } from '../../utils/request.js';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tproductList: [],\r\n\t\t\tloading: false\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadProducts();\r\n\t},\r\n\tonShow() {\r\n\t\t// æ¯æ¬¡æ˜¾ç¤ºæ—¶åˆ·æ–°\r\n\t\tthis.loadProducts();\r\n\t},\r\n\tmethods: {\r\n\t\t// åŠ è½½æ‰€æœ‰å•†å“ï¼ˆä¼šå‘˜å¡ + å®ä½“å•†å“ï¼‰\r\n\t\tasync loadProducts() {\r\n\t\t\tthis.loading = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await get('/userProduct/my/list', {});\r\n\t\t\t\tthis.productList = result || [];\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('åŠ è½½å•†å“å¤±è´¥:', error);\r\n\t\t\t\tthis.productList = [];\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// è·å–å¡ç‰‡å›¾æ ‡\r\n\t\tgetCardIcon(cardType) {\r\n\t\t\tswitch(cardType) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\treturn 'ğŸ‘‘';\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\treturn 'ğŸ’';\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\treturn 'ğŸ«';\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn 'ğŸ’³';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// è·å–çŠ¶æ€ç±»å\r\n\t\tgetStatusClass(status) {\r\n\t\t\tswitch(status) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\treturn 'status-inactive';\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\treturn 'status-active';\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\treturn 'status-expired';\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\treturn 'status-invalid';\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// æ ¼å¼åŒ–æ—¥æœŸ\r\n\t\tformatDate(dateTime) {\r\n\t\t\tif (!dateTime) return '-';\r\n\t\t\tconst date = new Date(dateTime);\r\n\t\t\tconst year = date.getFullYear();\r\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0');\r\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\r\n\t\t\treturn `${year}-${month}-${day}`;\r\n\t\t},\r\n\t\t\r\n\t\t// å¤„ç†å•†å“ç‚¹å‡»\r\n\t\thandleProductClick(item) {\r\n\t\t\tif (item.type === 4) {\r\n\t\t\t\t// å®ä½“å•†å“ï¼šæç¤ºè”ç³»å®¢æœ\r\n\t\t\t\tconst content = `|å•†å“åç§°ï¼š${item.name}\\n\\n|å•†å“æ•°é‡ï¼š${item.quantity} ä»¶\\n\\n| æ ¸é”€æ–¹å¼ï¼š\\nè¯·è”ç³»å®¢æœå‡ºç¤ºå½“å‰å‡­è¯è¿›è¡Œçº¿ä¸‹å…‘æ¢\\n\\n| å®¢æœçƒ­çº¿ï¼š400-656-00555`;\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'å®ä½“å•†å“è¯¦æƒ…',\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tconfirmText: 'æˆ‘çŸ¥é“äº†',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// ä¼šå‘˜å¡ï¼šæ˜¾ç¤ºè¯¦æƒ…\r\n\t\t\t\tconst emoji = item.type === 1 ? 'ğŸ‘‘' : item.type === 2 ? 'ğŸ’' : 'ğŸ«';\r\n\t\t\t\tlet content = `|ä¼šå‘˜å¡å·ï¼š\\n${item.cardNumber || 'æš‚æ— '}\\n\\n`;\r\n\t\t\t\tcontent += `|å½“å‰çŠ¶æ€ï¼š${item.statusText}\\n\\n`;\r\n\t\t\t\t\r\n\t\t\t\tif (item.type === 3) {\r\n\t\t\t\t\tcontent += `|å‰©ä½™æ¬¡æ•°ï¼š${item.remainCount} æ¬¡`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontent += `|æœ‰æ•ˆæœŸè‡³ï¼š\\n${this.formatDate(item.endTime)}`;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: `${emoji} ${item.name}`,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tconfirmText: 'æˆ‘çŸ¥é“äº†',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// å»å•†åŸ\r\n\t\tgoMall() {\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/mall/mall'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n\tmin-height: 100vh;\r\n\tbackground-color: #f5f5f5;\r\n}\r\n\r\n.container {\r\n\tpadding: 30rpx;\r\n}\r\n\r\n.product-list {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 24rpx;\r\n}\r\n\r\n.product-card {\r\n\tposition: relative;\r\n\tborder-radius: 24rpx;\r\n\toverflow: hidden;\r\n\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.12);\r\n\ttransition: transform 0.2s;\r\n}\r\n\r\n.product-card:active {\r\n\ttransform: scale(0.98);\r\n}\r\n\r\n/* èƒŒæ™¯å›¾ç‰‡ */\r\n.card-bg-image {\r\n\twidth: 100%;\r\n\theight: auto;\r\n\tdisplay: block;\r\n}\r\n\r\n/* é®ç½©å±‚ */\r\n.card-overlay {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.5) 100%);\r\n\tz-index: 1;\r\n}\r\n\r\n/* å†…å®¹å±‚ */\r\n.card-content {\r\n\tposition: absolute;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tz-index: 2;\r\n\tpadding: 24rpx 30rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 16rpx;\r\n}\r\n\r\n.content-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.product-name {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ffffff;\r\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.6);\r\n\tflex: 1;\r\n\tmargin-right: 16rpx;\r\n}\r\n\r\n.content-footer {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.product-type {\r\n\tfont-size: 26rpx;\r\n\tcolor: rgba(255, 255, 255, 0.95);\r\n\ttext-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.5);\r\n\tfont-weight: 500;\r\n}\r\n\r\n.validity-date, .remain-count, .quantity {\r\n\tfont-size: 28rpx;\r\n\tcolor: #ffffff;\r\n\tfont-weight: bold;\r\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.6);\r\n\tbackground: rgba(255, 255, 255, 0.2);\r\n\tpadding: 8rpx 20rpx;\r\n\tborder-radius: 24rpx;\r\n\tbackdrop-filter: blur(10rpx);\r\n}\r\n\r\n/* å·²è¿‡æœŸ/å·²ä½œåºŸ/å·²æ ¸é”€ */\r\n.product-card.disabled {\r\n\topacity: 0.6;\r\n}\r\n\r\n/* å•†å“çŠ¶æ€æ ‡ç­¾ */\r\n.product-status {\r\n\tpadding: 6rpx 16rpx;\r\n\tborder-radius: 20rpx;\r\n\tfont-size: 22rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ffffff;\r\n}\r\n\r\n.card-status {\r\n\tpadding: 8rpx 20rpx;\r\n\tborder-radius: 20rpx;\r\n\tfont-size: 22rpx;\r\n\tcolor: #ffffff;\r\n\tbackground: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.status-active {\r\n\tbackground: rgba(76, 175, 80, 0.8);\r\n}\r\n\r\n.status-expired {\r\n\tbackground: rgba(255, 68, 68, 0.8);\r\n}\r\n\r\n/* å¡ç‰‡ä¸»ä½“ */\r\n.card-body {\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.card-number {\r\n\tdisplay: block;\r\n\tfont-size: 36rpx;\r\n\tfont-weight: bold;\r\n\tcolor: #ffffff;\r\n\tletter-spacing: 4rpx;\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.product-name {\r\n\tdisplay: block;\r\n\tfont-size: 28rpx;\r\n\tcolor: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n/* å¡ç‰‡åº•éƒ¨ */\r\n.card-footer {\r\n\t\r\n}\r\n\r\n.validity-info {\r\n\tdisplay: flex;\r\n\talign-items: baseline;\r\n}\r\n\r\n.validity-info .label {\r\n\tfont-size: 24rpx;\r\n\tcolor: rgba(255, 255, 255, 0.8);\r\n\tmargin-right: 8rpx;\r\n}\r\n\r\n.validity-info .value {\r\n\tfont-size: 28rpx;\r\n\tcolor: #ffffff;\r\n\tfont-weight: 500;\r\n\tmargin-right: 8rpx;\r\n}\r\n\r\n.validity-info .remain {\r\n\tfont-size: 22rpx;\r\n\tcolor: rgba(255, 255, 255, 0.7);\r\n}\r\n\r\n/* ç©ºçŠ¶æ€ */\r\n.empty-state {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tmin-height: 80vh;\r\n\tpadding: 60rpx;\r\n}\r\n\r\n.empty-icon {\r\n\tfont-size: 160rpx;\r\n\tmargin-bottom: 30rpx;\r\n}\r\n\r\n.empty-text {\r\n\tfont-size: 32rpx;\r\n\tcolor: #333333;\r\n\tfont-weight: bold;\r\n\tmargin-bottom: 16rpx;\r\n}\r\n\r\n.empty-tip {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999999;\r\n\tmargin-bottom: 40rpx;\r\n}\r\n\r\n.go-mall-btn {\r\n\twidth: 300rpx;\r\n\theight: 80rpx;\r\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\r\n\tborder-radius: 40rpx;\r\n\tfont-size: 28rpx;\r\n\tcolor: #ffffff;\r\n\tborder: none;\r\n\tline-height: 80rpx;\r\n}\r\n\r\n.go-mall-btn::after {\r\n\tborder: none;\r\n}\r\n\r\n/* åŠ è½½çŠ¶æ€ */\r\n.loading-state {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmin-height: 80vh;\r\n}\r\n\r\n.loading-text {\r\n\tfont-size: 28rpx;\r\n\tcolor: #999999;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/my-cards/my-cards.vue'\nwx.createPage(MiniProgramPage)"],"names":["get","uni"],"mappings":";;;AAqDA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,aAAa,CAAE;AAAA,MACf,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,aAAY;AAAA,EACjB;AAAA,EACD,SAAS;AAER,SAAK,aAAY;AAAA,EACjB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,eAAe;AACpB,WAAK,UAAU;AACf,UAAI;AACH,cAAM,SAAS,MAAMA,cAAAA,IAAI,wBAAwB,CAAE,CAAA;AACnD,aAAK,cAAc,UAAU;MAC5B,SAAO,OAAO;AACfC,sBAAA,MAAA,MAAA,SAAA,qCAAc,WAAW,KAAK;AAC9B,aAAK,cAAc;MACpB,UAAU;AACT,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA;AAAA,IAGD,YAAY,UAAU;AACrB,cAAO,UAAQ;AAAA,QACd,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR;AACC,iBAAO;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAGD,eAAe,QAAQ;AACtB,cAAO,QAAM;AAAA,QACZ,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR,KAAK;AACJ,iBAAO;AAAA,QACR;AACC,iBAAO;AAAA,MACT;AAAA,IACA;AAAA;AAAA,IAGD,WAAW,UAAU;AACpB,UAAI,CAAC;AAAU,eAAO;AACtB,YAAM,OAAO,IAAI,KAAK,QAAQ;AAC9B,YAAM,OAAO,KAAK;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAC9B;AAAA;AAAA,IAGD,mBAAmB,MAAM;AACxB,UAAI,KAAK,SAAS,GAAG;AAEpB,cAAM,UAAU,SAAS,KAAK,IAAI;AAAA;AAAA,QAAa,KAAK,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP;AAAA,UACA,aAAa;AAAA,UACb,YAAY;AAAA,QACb,CAAC;AAAA,aACK;AAEN,cAAM,QAAQ,KAAK,SAAS,IAAI,OAAO,KAAK,SAAS,IAAI,OAAO;AAChE,YAAI,UAAU;AAAA,EAAW,KAAK,cAAc,IAAI;AAAA;AAAA;AAChD,mBAAW,SAAS,KAAK,UAAU;AAAA;AAAA;AAEnC,YAAI,KAAK,SAAS,GAAG;AACpB,qBAAW,SAAS,KAAK,WAAW;AAAA,eAC9B;AACN,qBAAW;AAAA,EAAW,KAAK,WAAW,KAAK,OAAO,CAAC;AAAA,QACpD;AAEAA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,GAAG,KAAK,IAAI,KAAK,IAAI;AAAA,UAC5B;AAAA,UACA,aAAa;AAAA,UACb,YAAY;AAAA,QACb,CAAC;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAGD,SAAS;AACRA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,MACN,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjKA,GAAG,WAAW,eAAe;"}