{"version":3,"file":"my-cards.js","sources":["pages/my-cards/my-cards.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXktY2FyZHMvbXktY2FyZHMudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"container\" v-if=\"productList.length > 0\">\n\t\t\t<!-- ÂïÜÂìÅÂàóË°® -->\n\t\t\t<view class=\"product-list\">\n\t\t\t\t<view\n\t\t\t\t\tclass=\"product-card\"\n\t\t\t\t\tv-for=\"item in productList\" \n\t\t\t\t\t:key=\"item.id + '-' + item.type\"\n\t\t\t\t\t@click=\"handleProductClick(item)\"\n\t\t\t\t>\n\t\t\t\t\t<!-- ËÉåÊôØÂõæÁâá -->\n\t\t\t\t\t<image class=\"card-bg-image\" :src=\"item.imageUrl || '/static/images/logo.png'\" mode=\"widthFix\"></image>\n\t\t\t\t\t\n\t\t\t\t\t<!-- Âç°ÁâáÂÜÖÂÆπ -->\n\t\t\t\t\t<view class=\"card-content\">\n\t\t\t\t\t\t<!-- Â§¥ÈÉ®‰ø°ÊÅØ -->\n\t\t\t\t\t\t<view class=\"content-header\">\n\t\t\t\t\t\t\t<text class=\"product-name\">ÂêçÁß∞Ôºö{{ item.name }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- Â∫ïÈÉ®‰ø°ÊÅØ -->\n\t\t\t\t\t\t<view class=\"content-footer\">\n\t\t\t\t\t\t\t<text class=\"product-type\">Á±ªÂûãÔºö{{ item.typeText }}</text>\n\t\t\t\t\t\t\t<!-- ÊúâÊïàÊúüÊ†áÁ≠æÔºà‰ºöÂëòÂç°Ôºâ -->\n\t\t\t\t\t\t\t<text class=\"validity-date\" v-if=\"item.type <= 3 && item.endTime\">Ëá≥ {{ formatDate(item.endTime) }}</text>\n\t\t\t\t\t\t\t<!-- Ê¨°Á•®ÊòæÁ§∫Ââ©‰ΩôÊ¨°Êï∞ -->\n\t\t\t\t\t\t\t<text class=\"remain-count\" v-if=\"item.type === 3\">Ââ©‰Ωô {{ item.remainCount }} Ê¨°</text>\n\t\t\t\t\t\t\t<!-- ÂÆû‰ΩìÂïÜÂìÅÊòæÁ§∫Êï∞Èáè -->\n\t\t\t\t\t\t\t<text class=\"quantity\" v-if=\"item.type === 4\">x{{ item.quantity }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Á©∫Áä∂ÊÄÅ -->\n\t\t<view class=\"empty-state\" v-else-if=\"!loading\">\n\t\t\t<text class=\"empty-icon\">üéÅ</text>\n\t\t\t<text class=\"empty-text\">ÊöÇÊó†ÂïÜÂìÅ</text>\n\t\t\t<text class=\"empty-tip\">Ë¥≠‰π∞ÊàñÂÖëÊç¢ÂïÜÂìÅÂêéÂ∞ÜÂú®Ê≠§ÊòæÁ§∫</text>\n\t\t\t<button class=\"go-mall-btn\" @click=\"goMall\">ÂéªÂïÜÂüéÁúãÁúã</button>\n\t\t</view>\n\t\t\n\t\t<!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n\t\t<view class=\"loading-state\" v-if=\"loading\">\n\t\t\t<text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { get } from '../../utils/request.js';\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tproductList: [],\n\t\t\tloading: false\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.loadProducts();\n\t},\n\tonShow() {\n\t\t// ÊØèÊ¨°ÊòæÁ§∫Êó∂Âà∑Êñ∞\n\t\tthis.loadProducts();\n\t},\n\tmethods: {\n\t\t// Âä†ËΩΩÊâÄÊúâÂïÜÂìÅÔºà‰ºöÂëòÂç° + ÂÆû‰ΩìÂïÜÂìÅÔºâ\n\t\tasync loadProducts() {\n\t\t\tthis.loading = true;\n\t\t\ttry {\n\t\t\t\tconst result = await get('/userProduct/my/list', {});\n\t\t\t\tthis.productList = result || [];\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Âä†ËΩΩÂïÜÂìÅÂ§±Ë¥•:', error);\n\t\t\t\tthis.productList = [];\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\n\t\t// Ëé∑ÂèñÂç°ÁâáÂõæÊ†á\n\t\tgetCardIcon(cardType) {\n\t\t\tswitch(cardType) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn 'üëë';\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'üíé';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'üé´';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'üí≥';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// Ëé∑ÂèñÁä∂ÊÄÅÁ±ªÂêç\n\t\tgetStatusClass(status) {\n\t\t\tswitch(status) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn 'status-inactive';\n\t\t\t\tcase 1:\n\t\t\t\t\treturn 'status-active';\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'status-expired';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'status-invalid';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\t\n\t\t// Ê†ºÂºèÂåñÊó•Êúü\n\t\tformatDate(dateTime) {\n\t\t\tif (!dateTime) return '-';\n\t\t\tconst date = new Date(dateTime);\n\t\t\tconst year = date.getFullYear();\n\t\t\tconst month = String(date.getMonth() + 1).padStart(2, '0');\n\t\t\tconst day = String(date.getDate()).padStart(2, '0');\n\t\t\treturn `${year}-${month}-${day}`;\n\t\t},\n\t\t\n\t\t// Â§ÑÁêÜÂïÜÂìÅÁÇπÂáª\n\t\thandleProductClick(item) {\n\t\t\tif (item.type === 4) {\n\t\t\t\t// ÂÆû‰ΩìÂïÜÂìÅÔºöÊèêÁ§∫ËÅîÁ≥ªÂÆ¢Êúç\n\t\t\t\tconst content = `ÂïÜÂìÅÂêçÁß∞Ôºö${item.name}\\n\\nÂïÜÂìÅÊï∞ÈáèÔºö${item.quantity} ‰ª∂\\n\\nÊ†∏ÈîÄÊñπÂºèÔºö\\nËØ∑ËÅîÁ≥ªÂÆ¢ÊúçÂá∫Á§∫ÂΩìÂâçÂá≠ËØÅËøõË°åÁ∫ø‰∏ãÂÖëÊç¢`;\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'ÂÆû‰ΩìÂïÜÂìÅËØ¶ÊÉÖ',\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tconfirmText: 'ËÅîÁ≥ªÂÆ¢Êúç',\n\t\t\t\t\tcancelText: 'ÊàëÁü•ÈÅì‰∫Ü',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t// Áî®Êà∑ÁÇπÂáª\"ËÅîÁ≥ªÂÆ¢Êúç\"\n\t\t\t\t\t\t\t// Áî±‰∫éshowModalÊó†Ê≥ïÁõ¥Êé•‰ΩøÁî®open-typeÔºåËøôÈáåÊèêÁ§∫Áî®Êà∑Âéª‰∏™‰∫∫‰∏≠ÂøÉ\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: 'ÊèêÁ§∫',\n\t\t\t\t\t\t\t\tcontent: 'ËØ∑ÈÄöËøá‰∏™‰∫∫‰∏≠ÂøÉ-ËÅîÁ≥ªÂÆ¢ÊúçÂäüËÉΩËÅîÁ≥ªÂÆ¢ÊúçËøõË°åÊ†∏ÈîÄ',\n\t\t\t\t\t\t\t\tconfirmText: 'Âéª‰∏™‰∫∫‰∏≠ÂøÉ',\n\t\t\t\t\t\t\t\tsuccess: (modalRes) => {\n\t\t\t\t\t\t\t\t\tif (modalRes.confirm) {\n\t\t\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/personal/personal'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// ‰ºöÂëòÂç°ÔºöÊòæÁ§∫ËØ¶ÊÉÖ\n\t\t\t\tconst emoji = item.type === 1 ? 'üëë' : item.type === 2 ? 'üíé' : 'üé´';\n\t\t\t\tlet content = `|‰ºöÂëòÂç°Âè∑Ôºö\\n${item.cardNumber || 'ÊöÇÊó†'}\\n\\n`;\n\t\t\t\tcontent += `|ÂΩìÂâçÁä∂ÊÄÅÔºö${item.statusText}\\n\\n`;\n\t\t\t\t\n\t\t\t\tif (item.type === 3) {\n\t\t\t\t\tcontent += `|Ââ©‰ΩôÊ¨°Êï∞Ôºö${item.remainCount} Ê¨°`;\n\t\t\t\t} else {\n\t\t\t\t\tcontent += `|ÊúâÊïàÊúüËá≥Ôºö\\n${this.formatDate(item.endTime)}`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: `${emoji} ${item.name}`,\n\t\t\t\t\tcontent: content,\n\t\t\t\t\tconfirmText: 'ÊàëÁü•ÈÅì‰∫Ü',\n\t\t\t\t\tshowCancel: false\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// ÂéªÂïÜÂüé\n\t\tgoMall() {\n\t\t\tuni.switchTab({\n\t\t\t\turl: '/pages/mall/mall'\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n}\n\n.container {\n\tpadding: 30rpx;\n}\n\n.product-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 24rpx;\n}\n\n.product-card {\n\tposition: relative;\n\tborder-radius: 24rpx;\n\toverflow: hidden;\n\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.12);\n\ttransition: transform 0.2s;\n}\n\n.product-card:active {\n\ttransform: scale(0.98);\n}\n\n/* ËÉåÊôØÂõæÁâá */\n.card-bg-image {\n\twidth: 100%;\n\theight: auto;\n\tdisplay: block;\n}\n\n/* ÈÅÆÁΩ©Â±Ç */\n.card-overlay {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.5) 100%);\n\tz-index: 1;\n}\n\n/* ÂÜÖÂÆπÂ±Ç */\n.card-content {\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 2;\n\tpadding: 24rpx 30rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 16rpx;\n}\n\n.content-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.product-name {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.6);\n\tflex: 1;\n\tmargin-right: 16rpx;\n}\n\n.content-footer {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.product-type {\n\tfont-size: 26rpx;\n\tcolor: rgba(255, 255, 255, 0.95);\n\ttext-shadow: 0 2rpx 6rpx rgba(0, 0, 0, 0.5);\n\tfont-weight: 500;\n}\n\n.validity-date, .remain-count, .quantity {\n\tfont-size: 28rpx;\n\tcolor: #ffffff;\n\tfont-weight: bold;\n\ttext-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.6);\n\tbackground: rgba(255, 255, 255, 0.2);\n\tpadding: 8rpx 20rpx;\n\tborder-radius: 24rpx;\n\tbackdrop-filter: blur(10rpx);\n}\n\n/* Â∑≤ËøáÊúü/Â∑≤‰ΩúÂ∫ü/Â∑≤Ê†∏ÈîÄ */\n.product-card.disabled {\n\topacity: 0.6;\n}\n\n/* ÂïÜÂìÅÁä∂ÊÄÅÊ†áÁ≠æ */\n.product-status {\n\tpadding: 6rpx 16rpx;\n\tborder-radius: 20rpx;\n\tfont-size: 22rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n}\n\n.card-status {\n\tpadding: 8rpx 20rpx;\n\tborder-radius: 20rpx;\n\tfont-size: 22rpx;\n\tcolor: #ffffff;\n\tbackground: rgba(255, 255, 255, 0.3);\n}\n\n.status-active {\n\tbackground: rgba(76, 175, 80, 0.8);\n}\n\n.status-expired {\n\tbackground: rgba(255, 68, 68, 0.8);\n}\n\n/* Âç°Áâá‰∏ª‰Ωì */\n.card-body {\n\tmargin-bottom: 30rpx;\n}\n\n.card-number {\n\tdisplay: block;\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: #ffffff;\n\tletter-spacing: 4rpx;\n\tmargin-bottom: 16rpx;\n}\n\n.product-name {\n\tdisplay: block;\n\tfont-size: 28rpx;\n\tcolor: rgba(255, 255, 255, 0.9);\n}\n\n/* Âç°ÁâáÂ∫ïÈÉ® */\n.card-footer {\n\t\n}\n\n.validity-info {\n\tdisplay: flex;\n\talign-items: baseline;\n}\n\n.validity-info .label {\n\tfont-size: 24rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n\tmargin-right: 8rpx;\n}\n\n.validity-info .value {\n\tfont-size: 28rpx;\n\tcolor: #ffffff;\n\tfont-weight: 500;\n\tmargin-right: 8rpx;\n}\n\n.validity-info .remain {\n\tfont-size: 22rpx;\n\tcolor: rgba(255, 255, 255, 0.7);\n}\n\n/* Á©∫Áä∂ÊÄÅ */\n.empty-state {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tmin-height: 80vh;\n\tpadding: 60rpx;\n}\n\n.empty-icon {\n\tfont-size: 160rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.empty-text {\n\tfont-size: 32rpx;\n\tcolor: #333333;\n\tfont-weight: bold;\n\tmargin-bottom: 16rpx;\n}\n\n.empty-tip {\n\tfont-size: 26rpx;\n\tcolor: #999999;\n\tmargin-bottom: 40rpx;\n}\n\n.go-mall-btn {\n\twidth: 300rpx;\n\theight: 80rpx;\n\tbackground: linear-gradient(135deg, #a8e063 0%, #297512 100%);\n\tborder-radius: 40rpx;\n\tfont-size: 28rpx;\n\tcolor: #ffffff;\n\tborder: none;\n\tline-height: 80rpx;\n}\n\n.go-mall-btn::after {\n\tborder: none;\n}\n\n/* Âä†ËΩΩÁä∂ÊÄÅ */\n.loading-state {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-height: 80vh;\n}\n\n.loading-text {\n\tfont-size: 28rpx;\n\tcolor: #999999;\n}\n</style>\n\n\n\n\n\n\n\n\n\n","import MiniProgramPage from 'D:/AAA_idea_java/pandaBase/panda-base-uni-app/pages/my-cards/my-cards.vue'\nwx.createPage(MiniProgramPage)"],"names":["get","uni"],"mappings":"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"}